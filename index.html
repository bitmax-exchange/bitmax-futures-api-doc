
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;python&quot;,&quot;java&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="java">java</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#bitmax-futures-trading-api-documentation" class="toc-h1 toc-link" data-title="BitMax Futures Trading API Documentation">BitMax Futures Trading API Documentation</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#using-bitmax-futures-trading-api" class="toc-h2 toc-link" data-title="Using BitMax Futures Trading API">Using BitMax Futures Trading API</a>
                  </li>
                  <li>
                    <a href="#terminology" class="toc-h2 toc-link" data-title="Terminology">Terminology</a>
                    <ul class="toc-list-h3">
                        <li>
                          <a href="#asset-collateral-asset" class="toc-h3 toc-link" data-title="Asset / Collateral Asset">Asset / Collateral Asset</a>
                        </li>
                        <li>
                          <a href="#symbol-futures-contract" class="toc-h3 toc-link" data-title="Symbol / Futures Contract">Symbol / Futures Contract</a>
                        </li>
                    </ul>
                  </li>
                  <li>
                    <a href="#making-rest-api-calls" class="toc-h2 toc-link" data-title="Making REST API Calls">Making REST API Calls</a>
                  </li>
                  <li>
                    <a href="#authenticate-a-restful-request" class="toc-h2 toc-link" data-title="Authenticate a RESTful Request">Authenticate a RESTful Request</a>
                    <ul class="toc-list-h3">
                        <li>
                          <a href="#create-request" class="toc-h3 toc-link" data-title="Create Request">Create Request</a>
                        </li>
                        <li>
                          <a href="#sign-a-request" class="toc-h3 toc-link" data-title="Sign a Request">Sign a Request</a>
                        </li>
                    </ul>
                  </li>
                  <li>
                    <a href="#api-permissions" class="toc-h2 toc-link" data-title="API Permissions">API Permissions</a>
                    <ul class="toc-list-h3">
                        <li>
                          <a href="#permissions-bird-39-s-eye-view" class="toc-h3 toc-link" data-title="Permissions - Bird's-eye View">Permissions - Bird's-eye View</a>
                        </li>
                    </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#rest-apis-futures" class="toc-h1 toc-link" data-title="REST APIs - Futures">REST APIs - Futures</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#market-data-public" class="toc-h2 toc-link" data-title="Market Data (Public)">Market Data (Public)</a>
                    <ul class="toc-list-h3">
                        <li>
                          <a href="#futures-collateral-assets" class="toc-h3 toc-link" data-title="Futures Collateral Assets">Futures Collateral Assets</a>
                        </li>
                        <li>
                          <a href="#futures-contracts" class="toc-h3 toc-link" data-title="Futures Contracts">Futures Contracts</a>
                        </li>
                        <li>
                          <a href="#reference-prices" class="toc-h3 toc-link" data-title="Reference Prices">Reference Prices</a>
                        </li>
                        <li>
                          <a href="#futures-market-data" class="toc-h3 toc-link" data-title="Futures Market Data">Futures Market Data</a>
                        </li>
                        <li>
                          <a href="#futures-funding-rates" class="toc-h3 toc-link" data-title="Futures Funding Rates">Futures Funding Rates</a>
                        </li>
                    </ul>
                  </li>
                  <li>
                    <a href="#private-data" class="toc-h2 toc-link" data-title="Private Data">Private Data</a>
                    <ul class="toc-list-h3">
                        <li>
                          <a href="#account-info" class="toc-h3 toc-link" data-title="Account Info">Account Info</a>
                        </li>
                        <li>
                          <a href="#collateral-balance" class="toc-h3 toc-link" data-title="Collateral Balance">Collateral Balance</a>
                        </li>
                        <li>
                          <a href="#contract-position" class="toc-h3 toc-link" data-title="Contract Position">Contract Position</a>
                        </li>
                        <li>
                          <a href="#account-risk-profile" class="toc-h3 toc-link" data-title="Account Risk Profile">Account Risk Profile</a>
                        </li>
                        <li>
                          <a href="#funding-payment-history" class="toc-h3 toc-link" data-title="Funding Payment History">Funding Payment History</a>
                        </li>
                        <li>
                          <a href="#wallet-transaction-history" class="toc-h3 toc-link" data-title="Wallet Transaction History">Wallet Transaction History</a>
                        </li>
                    </ul>
                  </li>
                  <li>
                    <a href="#transfer-fund-between-accounts" class="toc-h2 toc-link" data-title="Transfer Fund between Accounts">Transfer Fund between Accounts</a>
                    <ul class="toc-list-h3">
                        <li>
                          <a href="#from-cash-to-futures-account" class="toc-h3 toc-link" data-title="From Cash to Futures Account">From Cash to Futures Account</a>
                        </li>
                        <li>
                          <a href="#from-futures-to-cash-account" class="toc-h3 toc-link" data-title="From Futures to Cash Account">From Futures to Cash Account</a>
                        </li>
                    </ul>
                  </li>
                  <li>
                    <a href="#order" class="toc-h2 toc-link" data-title="Order">Order</a>
                    <ul class="toc-list-h3">
                        <li>
                          <a href="#place-an-order" class="toc-h3 toc-link" data-title="Place an Order">Place an Order</a>
                        </li>
                        <li>
                          <a href="#cancel-an-order" class="toc-h3 toc-link" data-title="Cancel an Order">Cancel an Order</a>
                        </li>
                        <li>
                          <a href="#list-open-orders" class="toc-h3 toc-link" data-title="List Open Orders">List Open Orders</a>
                        </li>
                        <li>
                          <a href="#historical-orders" class="toc-h3 toc-link" data-title="Historical Orders">Historical Orders</a>
                        </li>
                    </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#websocket" class="toc-h1 toc-link" data-title="WebSocket">WebSocket</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#guidelines" class="toc-h2 toc-link" data-title="Guidelines">Guidelines</a>
                    <ul class="toc-list-h3">
                        <li>
                          <a href="#general-message-request-handling-logic-from-client-side" class="toc-h3 toc-link" data-title="General Message Request/Handling Logic from Client Side">General Message Request/Handling Logic from Client Side</a>
                        </li>
                        <li>
                          <a href="#websocket-request" class="toc-h3 toc-link" data-title="WebSocket Request">WebSocket Request</a>
                        </li>
                        <li>
                          <a href="#keep-the-connection-alive-via-ping-pong" class="toc-h3 toc-link" data-title="Keep the Connection Alive via Ping/Pong">Keep the Connection Alive via Ping/Pong</a>
                        </li>
                    </ul>
                  </li>
                  <li>
                    <a href="#websocket-authentication" class="toc-h2 toc-link" data-title="WebSocket Authentication">WebSocket Authentication</a>
                    <ul class="toc-list-h3">
                        <li>
                          <a href="#method-1-websocket-authentication-with-request-headers" class="toc-h3 toc-link" data-title="Method 1 - WebSocket Authentication with Request Headers">Method 1 - WebSocket Authentication with Request Headers</a>
                        </li>
                        <li>
                          <a href="#method-2-websocket-authentication-by-sending-the-auth-message" class="toc-h3 toc-link" data-title="Method 2 - WebSocket Authentication by Sending the Auth Message">Method 2 - WebSocket Authentication by Sending the Auth Message</a>
                        </li>
                        <li>
                          <a href="#authentication-response" class="toc-h3 toc-link" data-title="Authentication Response">Authentication Response</a>
                        </li>
                    </ul>
                  </li>
                  <li>
                    <a href="#subscribe-to-data-channels" class="toc-h2 toc-link" data-title="Subscribe to Data Channels">Subscribe to Data Channels</a>
                    <ul class="toc-list-h3">
                        <li>
                          <a href="#how-to-subscribe" class="toc-h3 toc-link" data-title="How to Subscribe">How to Subscribe</a>
                        </li>
                        <li>
                          <a href="#channel-bar-data" class="toc-h3 toc-link" data-title="Channel: Bar Data">Channel: Bar Data</a>
                        </li>
                        <li>
                          <a href="#channel-level-1-order-book-data-bbo" class="toc-h3 toc-link" data-title="Channel: Level 1 Order Book Data (BBO)">Channel: Level 1 Order Book Data (BBO)</a>
                        </li>
                        <li>
                          <a href="#channel-level-2-order-book-updates" class="toc-h3 toc-link" data-title="Channel: Level 2 Order Book Updates">Channel: Level 2 Order Book Updates</a>
                        </li>
                        <li>
                          <a href="#channel-futures-market-data" class="toc-h3 toc-link" data-title="Channel: Futures Market Data">Channel: Futures Market Data</a>
                        </li>
                    </ul>
                  </li>
                  <li>
                    <a href="#order-channels" class="toc-h2 toc-link" data-title="Order Channels">Order Channels</a>
                    <ul class="toc-list-h3">
                        <li>
                          <a href="#subscribe-all-order-related-channels" class="toc-h3 toc-link" data-title="Subscribe All Order-Related Channels">Subscribe All Order-Related Channels</a>
                        </li>
                        <li>
                          <a href="#channel-order" class="toc-h3 toc-link" data-title="Channel: Order">Channel: Order</a>
                        </li>
                        <li>
                          <a href="#channel-contract-position-updates" class="toc-h3 toc-link" data-title="Channel: Contract Position Updates">Channel: Contract Position Updates</a>
                        </li>
                        <li>
                          <a href="#channel-futures-collateral-updates" class="toc-h3 toc-link" data-title="Channel: Futures Collateral Updates">Channel: Futures Collateral Updates</a>
                        </li>
                        <li>
                          <a href="#channel-futures-account-risk" class="toc-h3 toc-link" data-title="Channel: Futures Account Risk">Channel: Futures Account Risk</a>
                        </li>
                    </ul>
                  </li>
                  <li>
                    <a href="#websocket-data-request" class="toc-h2 toc-link" data-title="WebSocket - Data Request">WebSocket - Data Request</a>
                    <ul class="toc-list-h3">
                        <li>
                          <a href="#ws-orderbook-snapshot" class="toc-h3 toc-link" data-title="WS: Orderbook Snapshot">WS: Orderbook Snapshot</a>
                        </li>
                        <li>
                          <a href="#ws-futures-account-risk" class="toc-h3 toc-link" data-title="WS: Futures Account Risk">WS: Futures Account Risk</a>
                        </li>
                        <li>
                          <a href="#ws-place-order" class="toc-h3 toc-link" data-title="WS: Place Order">WS: Place Order</a>
                        </li>
                        <li>
                          <a href="#ws-cancel-order" class="toc-h3 toc-link" data-title="WS: Cancel Order">WS: Cancel Order</a>
                        </li>
                        <li>
                          <a href="#ws-cancel-all-orders" class="toc-h3 toc-link" data-title="WS: Cancel All Orders">WS: Cancel All Orders</a>
                        </li>
                    </ul>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://bitmax-test.io'>BitMax.io</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='bitmax-futures-trading-api-documentation'>BitMax Futures Trading API Documentation</h1><h2 id='using-bitmax-futures-trading-api'>Using BitMax Futures Trading API</h2>
<p>The BitMax Futures API is based on RESTful and WebSocket. </p>

<ul>
<li>The base URL for the RESTful API is <code>https://bitmax-test.io/</code>. </li>
<li>The URL for the WebSocket is: <code>https://bitmax-test.io/&lt;account-group&gt;/api/v1/stream</code>. You will have to substitute <code>&lt;account-group&gt;</code> with your account group. </li>
</ul>

<p>The RESTful API has JSON-encoded responses. All websocket messages are JSON-encoded. </p>
<h2 id='terminology'>Terminology</h2><h3 id='asset-collateral-asset'>Asset / Collateral Asset</h3>
<p><strong>collateral asset</strong> refers to the cryptocurrency held in the account. Each collateral asset is uniquely identified by
an <code>asset</code> code. For instance, Bitcoin is one collateral asset and has asset code <code>BTC</code>. </p>
<h3 id='symbol-futures-contract'>Symbol / Futures Contract</h3>
<p><strong>Futures contract</strong> are tradable products listed on the exchange. Each futures contract is uniquely identified by a <code>symbol</code>. 
For instance, the symbol of the BTC perpetrual contract is <code>BTC-PERP</code>.</p>
<h2 id='making-rest-api-calls'>Making REST API Calls</h2>
<p>The RESTful APIs will always respond with JSON objects. </p>
<h2 id='authenticate-a-restful-request'>Authenticate a RESTful Request</h2><h3 id='create-request'>Create Request</h3>
<p>To access private data via RESTful APIs, you must include the following headers:</p>

<ul>
<li><code>x-auth-key</code> - required, the api key as a string. </li>
<li><code>x-auth-timestamp</code> - required, the UTC timestamp in milliseconds of your request</li>
<li><code>x-auth-signature</code> - required, the request signature (see <a href="#sign-a-request">Sign a Request</a>)</li>
</ul>

<p>The timestamp in the header will be checked against server time. If the difference is greater than 30 seconds, the request will 
be rejected. </p>
<h3 id='sign-a-request'>Sign a Request</h3>
<blockquote>
<p>Signing a RESTful Request</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># bash </span>
<span class="nv">APIPATH</span><span class="o">=</span>user/info
<span class="nv">APIKEY</span><span class="o">=</span>CEcrjGyipqt0OflgdQQSRGdrDXdDUY2x
<span class="nv">SECRET</span><span class="o">=</span>hV8FgjyJtpvVeAcMAgzgAFQCN36wmbWuN7o3WPcYcYhFd8qvE43gzFGVsFcCqMNk
<span class="nv">TIMESTAMP</span><span class="o">=</span><span class="sb">`</span>date +%s%N | cut -c -13<span class="sb">`</span> <span class="c"># 1562952827927</span>
<span class="nv">MESSAGE</span><span class="o">=</span><span class="nv">$TIMESTAMP</span>+<span class="nv">$APIPATH</span>
<span class="nv">SIGNATURE</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$MESSAGE</span> | openssl dgst -sha256 -hmac <span class="nv">$SECRET</span> -binary | base64<span class="sb">`</span>
<span class="nb">echo</span> <span class="nv">$SIGNATURE</span>  <span class="c"># vBZf8OQuiTJIVbNpNHGY3zcUsK5gJpwb5lgCgarpxYI=</span>

curl -X GET -i <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"x-auth-key: </span><span class="nv">$APIKEY</span><span class="s2">"</span> <span class="se">\</span>
  -H <span class="s2">"x-auth-signature: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span> <span class="se">\</span>
  -H <span class="s2">"x-auth-timestamp: </span><span class="nv">$TIMESTAMP</span><span class="s2">"</span> <span class="se">\</span>
  https://bitmax-test.io/api/pro/v1/info
</code></pre><pre class="highlight python tab-python"><code><span class="c"># python 3.6+</span>
<span class="kn">import</span> <span class="nn">time</span><span class="p">,</span> <span class="n">hmac</span><span class="p">,</span> <span class="n">hashlib</span><span class="p">,</span> <span class="n">base64</span>

<span class="n">api_path</span>  <span class="o">=</span> <span class="s">"user/info"</span>
<span class="n">api_key</span>   <span class="o">=</span> <span class="s">"CEcrjGyipqt0OflgdQQSRGdrDXdDUY2x"</span>
<span class="n">sec_key</span>   <span class="o">=</span> <span class="s">"hV8FgjyJtpvVeAcMAgzgAFQCN36wmbWuN7o3WPcYcYhFd8qvE43gzFGVsFcCqMNk"</span>
<span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1e3</span><span class="p">))</span> <span class="c"># 1562952827927</span>

<span class="n">message</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">f</span><span class="s">"{timestamp}+{api_path}"</span><span class="p">,</span> <span class="s">'utf-8'</span><span class="p">)</span>
<span class="n">secret</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">sec_key</span><span class="p">,</span> <span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">signature</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">secret</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">digestmod</span><span class="o">=</span><span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">())</span>

<span class="n">header</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"x-auth-key"</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
  <span class="s">"x-auth-signature"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span> 
  <span class="s">"x-auth-timestamp"</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
<span class="p">}</span>
<span class="k">print</span><span class="p">(</span><span class="n">signature</span><span class="p">)</span>  <span class="c"># b'vBZf8OQuiTJIVbNpNHGY3zcUsK5gJpwb5lgCgarpxYI='</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">// java 1.8+</span>
<span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.commons.codec.binary.Base64</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SignatureExample</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="kt">long</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span> <span class="c1">// 1562952827927</span>
      <span class="n">String</span> <span class="n">api_path</span> <span class="o">=</span> <span class="s">"user/info"</span><span class="o">;</span>
      <span class="n">String</span> <span class="n">secret</span> <span class="o">=</span> <span class="s">"hV8FgjyJtpvVeAcMAgzgAFQCN36wmbWuN7o3WPcYcYhFd8qvE43gzFGVsFcCqMNk"</span><span class="o">;</span>
      <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="s">"+"</span> <span class="o">+</span> <span class="n">api_path</span><span class="o">;</span>

      <span class="n">Mac</span> <span class="n">sha256_HMAC</span> <span class="o">=</span> <span class="n">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
      <span class="n">SecretKeySpec</span> <span class="n">secret_key</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
      <span class="n">sha256_HMAC</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secret_key</span><span class="o">);</span>

      <span class="n">String</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">Base64</span><span class="o">.</span><span class="na">encodeBase64String</span><span class="o">(</span><span class="n">sha256_HMAC</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">message</span><span class="o">.</span><span class="na">getBytes</span><span class="o">()));</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">hash</span><span class="o">);</span> <span class="c1">// vBZf8OQuiTJIVbNpNHGY3zcUsK5gJpwb5lgCgarpxYI=</span>
    <span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error"</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p>To query APIs with private data, you must include a signature using base64 encoded HMAC sha256 algorithm. The prehash string is <code>&lt;timestamp&gt;+&lt;api-path&gt;</code>. 
The <code>timestamp</code> is the UTC timestamp in milliseconds.  </p>
<h2 id='api-permissions'>API Permissions</h2>
<p>You must specify permissions when setting up API keys. API permissions can never be changed. If you want different permissions, you would have
to apply for new API keys. </p>

<p>There are three different permissions:</p>

<ul>
<li>View </li>
<li>Trade</li>
<li>Transfer</li>
</ul>
<h3 id='permissions-bird-39-s-eye-view'>Permissions - Bird&#39;s-eye View</h3><h4 id='restful-apis'>RESTful APIs</h4>
<table><thead>
<tr>
<th>API</th>
<th>Type</th>
<th style="text-align: center">View</th>
<th style="text-align: center">Trade</th>
<th style="text-align: center">Transfer</th>
<th>Method / URL</th>
</tr>
</thead><tbody>
<tr>
<td>Market Data</td>
<td>Public</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td><code>GET /api/pro/v1/futures/market-data</code></td>
</tr>
<tr>
<td>Funding Rate History</td>
<td>Public</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td><code>GET /api/pro/v1/futures/funding-rates</code></td>
</tr>
<tr>
<td>Futures Contract Info</td>
<td>Public</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td><code>GET /api/pro/v1/futures/contracts</code></td>
</tr>
<tr>
<td>Futures Collateral Info</td>
<td>Public</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td><code>GET /api/pro/v1/futures/collateral</code></td>
</tr>
<tr>
<td>Reference Prices</td>
<td>Public</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td><code>GET /api/pro/v1/futures/ref-px</code></td>
</tr>
<tr>
<td>Account Info</td>
<td>Private</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td><code>GET /api/pro/v1/info</code></td>
</tr>
<tr>
<td>Account Funding Payment History</td>
<td>Private</td>
<td style="text-align: center">x</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td><code>GET &lt;account-group&gt;/api/pro/v1/futures/funding-payments</code></td>
</tr>
<tr>
<td>Account Contract Positions</td>
<td>Private</td>
<td style="text-align: center">x</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td><code>GET &lt;account-group&gt;/api/pro/futures/position</code></td>
</tr>
<tr>
<td>Futures Collateral Balances</td>
<td>Private</td>
<td style="text-align: center">x</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td><code>GET &lt;account-group&gt;/api/pro/v1/futures/collateral-balance</code></td>
</tr>
<tr>
<td>Account Futures Risk Profile</td>
<td>Private</td>
<td style="text-align: center">x</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td><code>GET &lt;account-group&gt;/api/pro/futures/risk</code></td>
</tr>
<tr>
<td>Wallet Deposit/Withdrawal History</td>
<td>Private</td>
<td style="text-align: center">x</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td><code>GET /api/pro/wallet/transactions</code></td>
</tr>
<tr>
<td>List Open Orders</td>
<td>Private</td>
<td style="text-align: center">x</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td><code>GET &lt;account-group&gt;/api/pro/v1/futures/order/open</code></td>
</tr>
<tr>
<td>Place New Order</td>
<td>Private</td>
<td style="text-align: center"></td>
<td style="text-align: center">x</td>
<td style="text-align: center"></td>
<td><code>POST &lt;account-group&gt;/api/pro/v1/futures/order</code></td>
</tr>
<tr>
<td>Cancel Order</td>
<td>Private</td>
<td style="text-align: center"></td>
<td style="text-align: center">x</td>
<td style="text-align: center"></td>
<td><code>DELETE &lt;account-group&gt;/api/pro/v1/futures/order</code></td>
</tr>
<tr>
<td>Transfer Funds from Cash to Futures</td>
<td>Private</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">x</td>
<td><code>POST /&lt;account-group&gt;/api/pro/v1/futures/transfer/deposit</code></td>
</tr>
<tr>
<td>Transfer Funds from Futures to Cash</td>
<td>Private</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">x</td>
<td><code>POST /&lt;account-group&gt;/api/pro/v1/futures/transfer/withdraw</code></td>
</tr>
</tbody></table>
<h4 id='websocket-requests'>WebSocket Requests</h4>
<table><thead>
<tr>
<th>API</th>
<th>Type</th>
<th style="text-align: center">View</th>
<th style="text-align: center">Trade</th>
<th style="text-align: center">Transfer</th>
<th>Action</th>
</tr>
</thead><tbody>
<tr>
<td>Authenticate Session</td>
<td>Public</td>
<td style="text-align: center"></td>
<td style="text-align: center">x</td>
<td style="text-align: center"></td>
<td><code>auth</code></td>
</tr>
<tr>
<td>Place New Order</td>
<td>Private</td>
<td style="text-align: center"></td>
<td style="text-align: center">x</td>
<td style="text-align: center"></td>
<td><code>place-order</code></td>
</tr>
<tr>
<td>Cancel Order</td>
<td>Private</td>
<td style="text-align: center"></td>
<td style="text-align: center">x</td>
<td style="text-align: center"></td>
<td><code>cancel-order</code></td>
</tr>
<tr>
<td>Cancel All Orders</td>
<td>Private</td>
<td style="text-align: center"></td>
<td style="text-align: center">x</td>
<td style="text-align: center"></td>
<td><code>cancel-all</code></td>
</tr>
<tr>
<td>Account Contract Positions</td>
<td>Private</td>
<td style="text-align: center">x</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td><code>futures-position</code></td>
</tr>
<tr>
<td>Account Futures Risk Profile</td>
<td>Private</td>
<td style="text-align: center">x</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td><code>futures-risk</code></td>
</tr>
</tbody></table>
<h1 id='rest-apis-futures'>REST APIs - Futures</h1><h2 id='market-data-public'>Market Data (Public)</h2>
<p>Anyone can access public market data.  </p>
<h3 id='futures-collateral-assets'>Futures Collateral Assets</h3>
<blockquote>
<p>Futures Collateral Assets </p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET https://bitmax-test.io/api/pro/v1/futures/collateral
</code></pre>
<blockquote>
<p>Sample Resonse</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"asset"</span><span class="p">:</span><span class="w">            </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"assetName"</span><span class="p">:</span><span class="w">        </span><span class="s2">"Tether"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"discountFactor"</span><span class="p">:</span><span class="w">   </span><span class="s2">"1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"asset"</span><span class="p">:</span><span class="w">            </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"assetName"</span><span class="p">:</span><span class="w">        </span><span class="s2">"Bitcoin"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"discountFactor"</span><span class="p">:</span><span class="w">   </span><span class="s2">"0.98"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You can get a list of assets eligible to be used as collateral with this API, along with other information needed to calculate 
the total collateral value of your account. </p>
<h4 id='permissions'>Permissions</h4>
<p>This API is public. </p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET /api/pro/v1/futures/collateral</code></p>
<h4 id='response-content'>Response Content</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Sample Response</th>
</tr>
</thead><tbody>
<tr>
<td><strong>asset</strong></td>
<td><code>String</code></td>
<td>asset code</td>
<td><code>&quot;BTC&quot;</code></td>
</tr>
<tr>
<td><strong>assetName</strong></td>
<td><code>String</code></td>
<td>full name of the asset</td>
<td><code>&quot;Bitcoin&quot;</code></td>
</tr>
<tr>
<td><strong>discountFactor</strong></td>
<td><code>String</code></td>
<td>the collateral discount factor</td>
<td><code>&quot;0.98&quot;</code></td>
</tr>
</tbody></table>

<p>The exchange calculates the total collateral value of an account based on its adjusted USDT value 
(<strong>discount factor * reference price * collateral balance</strong>). The <strong>collateral value</strong> of the account is simply the sum of 
the adjusted USDT value of its all collateral assets. </p>
<h3 id='futures-contracts'>Futures Contracts</h3>
<blockquote>
<p>Futures Contracts</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET https://bitmax-test.io/api/pro/v1/futures/contracts
</code></pre>
<blockquote>
<p>Sample Resonse</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">           </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tradingStartTime"</span><span class="p">:</span><span class="w">  </span><span class="mi">1574640000000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"collapseDecimals"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1,0.1,0.01"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"minQty"</span><span class="p">:</span><span class="w">           </span><span class="s2">"0.000000001"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"maxQty"</span><span class="p">:</span><span class="w">           </span><span class="s2">"1000000000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"minNotional"</span><span class="p">:</span><span class="w">      </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"maxNotional"</span><span class="p">:</span><span class="w">      </span><span class="s2">"100000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"statusCode"</span><span class="p">:</span><span class="w">       </span><span class="s2">"Normal"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"statusMessage"</span><span class="p">:</span><span class="w">    </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tickSize"</span><span class="p">:</span><span class="w">         </span><span class="s2">"0.25"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"lotSize"</span><span class="p">:</span><span class="w">          </span><span class="s2">"0.0001"</span><span class="p">,</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='permissions'>Permissions</h4>
<p>This API is public. </p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET /api/pro/v1/futures/contracts</code></p>
<h4 id='response-content'>Response Content</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>symbol</strong></td>
<td><code>String</code></td>
<td>contract symbol</td>
</tr>
<tr>
<td><strong>tradingStartTime</strong></td>
<td>Long</td>
<td>UTC timestamp when the contract is available for trading</td>
</tr>
<tr>
<td><strong>collapseDecimals</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>minQty</strong></td>
<td><code>String</code></td>
<td>minimum quantity allowed for an order</td>
</tr>
<tr>
<td><strong>maxQty</strong></td>
<td><code>String</code></td>
<td>maximum quantity allowed for an order</td>
</tr>
<tr>
<td><strong>minNotional</strong></td>
<td><code>String</code></td>
<td>minimum notional allowed for an order</td>
</tr>
<tr>
<td><strong>maxNotional</strong></td>
<td><code>String</code></td>
<td>maximum notional allowed for an order</td>
</tr>
<tr>
<td><strong>tickSize</strong></td>
<td><code>String</code></td>
<td>the tick size requirement for an order (a number in string format)</td>
</tr>
<tr>
<td><strong>lotSize</strong></td>
<td><code>String</code></td>
<td>the lot size requirement for an order (a number in string format)</td>
</tr>
<tr>
<td><strong>statusCode</strong></td>
<td><code>String</code></td>
<td>status code of the contract, e.g., <code>Normal</code></td>
</tr>
<tr>
<td><strong>statusMessage</strong></td>
<td><code>String</code></td>
<td>When status code is not <code>Normal</code>, this message will contain the reason.</td>
</tr>
</tbody></table>
<h3 id='reference-prices'>Reference Prices</h3>
<blockquote>
<p>Reference Prices for Futures Collateral Assets </p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET https://bitmax-test.io/api/pro/v1/futures/ref-px
</code></pre><h4 id='permissions'>Permissions</h4>
<p>This API is public. </p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET /api/pro/v1/futures/ref-px</code></p>
<h3 id='futures-market-data'>Futures Market Data</h3>
<blockquote>
<p>Futures Market Data for one Contract</p>
</blockquote>
<pre class="highlight plaintext"><code># if only one symbol is provided, the API will respond with a single object
curl -X GET https://bitmax-test.io/api/pro/futures/market-data?symbol=BTC-PERP
</code></pre>
<blockquote>
<p>Sample Resonse</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">                 </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"openInterest"</span><span class="p">:</span><span class="w">           </span><span class="s2">"9000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sourceTime"</span><span class="p">:</span><span class="w">             </span><span class="mi">1579876668235</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fundingRate"</span><span class="p">:</span><span class="w">            </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fundingPaymentFlag"</span><span class="p">:</span><span class="w">     </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nextFundingPaymentTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1579874400000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"indexPrice"</span><span class="p">:</span><span class="w">             </span><span class="s2">"8495.01"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"markPrice"</span><span class="p">:</span><span class="w">              </span><span class="s2">"8493.50"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Futures Market Data for one or multiple Contracts</p>
</blockquote>
<pre class="highlight plaintext"><code># Appending a comma (,) and the API will respond with a list of one or more objects
curl -X GET https://bitmax-test.io/futures/market-data?symbol=BTC-PERP,
</code></pre>
<blockquote>
<p>Sample Resonse</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">                 </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"openInterest"</span><span class="p">:</span><span class="w">           </span><span class="s2">"9000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sourceTime"</span><span class="p">:</span><span class="w">             </span><span class="mi">1579876668235</span><span class="p">,</span><span class="w">
      </span><span class="s2">"fundingRate"</span><span class="p">:</span><span class="w">            </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"fundingPaymentFlag"</span><span class="p">:</span><span class="w">     </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"nextFundingPaymentTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1579874400000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"indexPrice"</span><span class="p">:</span><span class="w">             </span><span class="s2">"8495.01"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"markPrice"</span><span class="p">:</span><span class="w">              </span><span class="s2">"8493.50"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='permissions'>Permissions</h4>
<p>This API is public. </p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET /api/pro/v1/futures/market-data</code></p>
<h4 id='request-parameters'>Request Parameters</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Value Range</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>symbol</strong></td>
<td><code>String</code></td>
<td>No</td>
<td>symbols separated by comma</td>
<td></td>
</tr>
</tbody></table>

<p>By default, the API returns data for all contracts traded on the exchange. You can provide an optional 
parameter <code>symbol</code> to taylor the result to a specific subset of contracts. </p>

<p>In most cases, this API will return a list of objects. However, it you set <code>symbol</code> to a single contract, 
such as <code>symbol=BTC-PERP</code>, the API will return the object itself instead. If you want the response to alaways 
be a list of objects, append a comma (e.g. <code>symbol=BTC-PERP,</code>).</p>
<h4 id='response-content'>Response Content</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Sample Value</th>
</tr>
</thead><tbody>
<tr>
<td><strong>symbol</strong></td>
<td><code>String</code></td>
<td>Contract symbol</td>
<td><code>&quot;BTC-PERP&quot;</code></td>
</tr>
<tr>
<td><strong>openInterest</strong></td>
<td><code>String</code></td>
<td>Open interest</td>
<td><code>&quot;9000&quot;</code></td>
</tr>
<tr>
<td><strong>sourceTime</strong></td>
<td><code>Long</code></td>
<td>UTC timestamp when market data is generated</td>
<td><code>1579876668235</code></td>
</tr>
<tr>
<td><strong>fundingRate</strong></td>
<td><code>String</code></td>
<td>Current funding rate</td>
<td><code>&quot;0.01&quot;</code></td>
</tr>
<tr>
<td><strong>fundingPaymentFlag</strong></td>
<td><code>Boolean</code></td>
<td></td>
<td><code>false</code></td>
</tr>
<tr>
<td><strong>nextFundingPaymentTime</strong></td>
<td><code>Long</code></td>
<td>UTC timestamp of the next timestamp</td>
<td><code>1579874400000</code></td>
</tr>
<tr>
<td><strong>indexPrice</strong></td>
<td><code>String</code></td>
<td>the index price</td>
<td><code>&quot;8495.01&quot;</code></td>
</tr>
<tr>
<td><strong>markPrice</strong></td>
<td><code>String</code></td>
<td>the mark price</td>
<td><code>&quot;8493.50&quot;</code></td>
</tr>
</tbody></table>
<h3 id='futures-funding-rates'>Futures Funding Rates</h3>
<blockquote>
<p>Futures Funding Rates </p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET https://bitmax-test.io/api/pro/v1/futures/funding-rates
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"page"</span><span class="p">:</span><span class="w">     </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pageSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
        </span><span class="s2">"hasNext"</span><span class="p">:</span><span class="w">  </span><span class="kc">true</span><span class="p">,</span><span class="w">    
        </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w">    </span><span class="mi">1578182100000</span><span class="p">,</span><span class="w">
              </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">      </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"fundingRate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w">    </span><span class="mi">1578181800000</span><span class="p">,</span><span class="w">
              </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">      </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"fundingRate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="err">...</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='permissions'>Permissions</h4>
<p>This API is public. </p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET /api/pro/v1/futures/funding-rates</code></p>
<h4 id='response-content'>Response Content</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>timestamp</strong></td>
<td><code>Long</code></td>
<td></td>
</tr>
<tr>
<td><strong>symbol</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>fundingRate</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
</tbody></table>
<h2 id='private-data'>Private Data</h2><h3 id='account-info'>Account Info</h3>
<blockquote>
<p>Account Info - Sample response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"accountGroup"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yyzzxxz@email.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"futuresAccount"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"fut1FfjKA3W1L7XZOipGKZNFBb34GRQ3"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"tradePermission"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"viewPermission"</span><span class="p">:</span><span class="w">  </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"userUID"</span><span class="p">:</span><span class="w">         </span><span class="s2">"U0866943712"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='permissions'>Permissions</h4>
<p>This API doesn&#39;t need any permission to access.</p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET /api/pro/v1/info</code></p>
<h4 id='signature'>Signature</h4>
<p>You should sign the message in header as specified in <a href="#sign-a-Request"><strong>Authenticate a RESTful Request</strong></a> section.</p>
<h4 id='prehash-string'>Prehash String</h4>
<p><code>&lt;timestamp&gt;+info</code></p>

<p>Obtain the account information. </p>

<p>You can obtain your <code>accountGroup</code> from this API, which you will need to include in the URL for all your private RESTful requests.</p>
<h4 id='response-content'>Response Content</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountGroup</strong></td>
<td><code>Int</code></td>
<td>non-negative integer</td>
</tr>
<tr>
<td><strong>email</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>futuresAccount</strong></td>
<td><code>List[String]</code></td>
<td>contains a list of your futures accounts. At the moment, the list should contain exactly one element.</td>
</tr>
<tr>
<td><strong>viewPermission</strong></td>
<td><code>Boolean</code></td>
<td></td>
</tr>
<tr>
<td><strong>tradePermission</strong></td>
<td><code>Boolean</code></td>
<td></td>
</tr>
<tr>
<td><strong>transferPermission</strong></td>
<td><code>Boolean</code></td>
<td></td>
</tr>
<tr>
<td><strong>userUID</strong></td>
<td><code>String</code></td>
<td>an unique id associated with user</td>
</tr>
</tbody></table>

<p>You will need <code>accountGroup</code> to access most private APIs. It never changes value for each account.  </p>
<h3 id='collateral-balance'>Collateral Balance</h3>
<blockquote>
<p>Futures Collateral Balance </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"asset"</span><span class="p">:</span><span class="w">            </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"totalBalance"</span><span class="p">:</span><span class="w">     </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"availableBalance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"maxTransferrable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"priceInUSDT"</span><span class="p">:</span><span class="w">      </span><span class="s2">"8455.705"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"asset"</span><span class="p">:</span><span class="w">            </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"totalBalance"</span><span class="p">:</span><span class="w">     </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"availableBalance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"maxTransferrable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"priceInUSDT"</span><span class="p">:</span><span class="w">      </span><span class="s2">"1"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='permissions'>Permissions</h4>
<p>You need view permission to access this API.</p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET &lt;account-group&gt;/api/pro/v1/futures/collateral-balance</code></p>
<h4 id='signature'>Signature</h4>
<p>You should sign the message in header as specified in <a href="#sign-a-request"><strong>Authenticate a RESTful Request</strong></a> section.</p>
<h4 id='prehash-string'>Prehash String</h4>
<p><code>&lt;timestamp&gt;+futures/collateral-balance</code></p>
<h4 id='request-parameters'>Request Parameters</h4>
<p>You don&#39;t need to specify any parameter for this API.</p>
<h4 id='response-content'>Response Content</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Sample Response</th>
</tr>
</thead><tbody>
<tr>
<td><strong>asset</strong></td>
<td><code>String</code></td>
<td>asset code</td>
<td><code>&quot;USDT&quot;</code></td>
</tr>
<tr>
<td><strong>totalBalance</strong></td>
<td><code>String</code></td>
<td>total balance</td>
<td><code>&quot;0&quot;</code></td>
</tr>
<tr>
<td><strong>availableBalance</strong></td>
<td><code>String</code></td>
<td>available balance</td>
<td><code>&quot;0&quot;</code></td>
</tr>
<tr>
<td><strong>maxTransferrable</strong></td>
<td><code>String</code></td>
<td>maximum transferrable amount</td>
<td><code>&quot;0&quot;</code></td>
</tr>
<tr>
<td><strong>priceInUSDT</strong></td>
<td><code>String</code></td>
<td>reference price in USDT</td>
<td><code>&quot;1&quot;</code></td>
</tr>
</tbody></table>
<h4 id='code-sample'>Code Sample</h4>
<p>Please refer to python code to <a href="https://github.com/???/query-futures-collateral-balance.py">query funding payments</a></p>
<h3 id='contract-position'>Contract Position</h3>
<blockquote>
<p>Contract Position</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">              </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"breakevenPrice"</span><span class="p">:</span><span class="w">      </span><span class="s2">"12805.265370586"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"collateralInUse"</span><span class="p">:</span><span class="w">     </span><span class="s2">"1350.314802427"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"estLiquidationPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16365.898288993"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"maxBuyOrderSize"</span><span class="p">:</span><span class="w">     </span><span class="s2">"44.612137464"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"maxSellOrderSize"</span><span class="p">:</span><span class="w">    </span><span class="s2">"38.962207464"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"position"</span><span class="p">:</span><span class="w">            </span><span class="s2">"-2.8535"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"positionNotional"</span><span class="p">:</span><span class="w">    </span><span class="s2">"-27006.296048541"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"positionPnl"</span><span class="p">:</span><span class="w">         </span><span class="s2">"9533.528686427"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='permissions'>Permissions</h4>
<p>You need view permission to access this API.</p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET &lt;account-group&gt;/api/pro/futures/position</code></p>
<h4 id='signature'>Signature</h4>
<p>You should sign the message in header as specified in <a href="#sign-a-request"><strong>Authenticate a RESTful Request</strong></a> section.</p>
<h4 id='prehash-string'>Prehash String</h4>
<p><code>&lt;timestamp&gt;+futures/position</code></p>
<h4 id='request-parameters'>Request Parameters</h4>
<p>You don&#39;t need to specify any parameter for this API.</p>
<h4 id='response-content'>Response Content</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Sample Response</th>
</tr>
</thead><tbody>
<tr>
<td><strong>symbol</strong></td>
<td><code>String</code></td>
<td>contract symbol</td>
<td><code>&quot;BTC-PERP&quot;</code></td>
</tr>
<tr>
<td><strong>breakevenPrice</strong></td>
<td><code>String</code></td>
<td>break-even price</td>
<td><code>&quot;12805.265370586&quot;</code></td>
</tr>
<tr>
<td><strong>estLiquidationPrice</strong></td>
<td><code>String</code></td>
<td>estimated liquidation price</td>
<td><code>&quot;16365.898288993&quot;</code></td>
</tr>
<tr>
<td><strong>collateralInUse</strong></td>
<td><code>String</code></td>
<td>collateral in Use (in USDT)</td>
<td><code>&quot;1350.314802427&quot;</code></td>
</tr>
<tr>
<td><strong>maxBuyOrderSize</strong></td>
<td><code>String</code></td>
<td>maximum quantity allowed to buy</td>
<td><code>&quot;44.612137464&quot;</code></td>
</tr>
<tr>
<td><strong>maxSellOrderSize</strong></td>
<td><code>String</code></td>
<td>maximum quantity allowed to sell</td>
<td><code>&quot;38.962207464&quot;</code></td>
</tr>
<tr>
<td><strong>position</strong></td>
<td><code>String</code></td>
<td>contract position</td>
<td><code>&quot;-2.8535&quot;</code></td>
</tr>
<tr>
<td><strong>positionNotional</strong></td>
<td><code>String</code></td>
<td>contract position notional value in USDT</td>
<td><code>&quot;-27006.296048541&quot;</code></td>
</tr>
<tr>
<td><strong>positionPnl</strong></td>
<td><code>String</code></td>
<td>contract position profit/loss in USDT</td>
<td><code>&quot;9533.528686427&quot;</code></td>
</tr>
</tbody></table>
<h4 id='code-sample'>Code Sample</h4>
<p>Please refer to python code to <a href="https://github.com/???/query-futures-position.py">query funding payments</a></p>
<h3 id='account-risk-profile'>Account Risk Profile</h3>
<blockquote>
<p>Account Risk Profile </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"accountMarginRate"</span><span class="p">:</span><span class="w">              </span><span class="s2">"16.606386637"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountValue"</span><span class="p">:</span><span class="w">                   </span><span class="s2">"13117.362712384"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountMaxLeverage"</span><span class="p">:</span><span class="w">             </span><span class="s2">"20"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"collateral"</span><span class="p">:</span><span class="w">                     </span><span class="s2">"12810.31775"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"collateralInUse"</span><span class="p">:</span><span class="w">                </span><span class="s2">"38.570454939"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"effectiveCollateral"</span><span class="p">:</span><span class="w">            </span><span class="s2">"12810.31775"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"freeCollateral"</span><span class="p">:</span><span class="w">                 </span><span class="s2">"12771.74729506"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currentLeverage"</span><span class="p">:</span><span class="w">                </span><span class="s2">"0.060217795"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"effectiveInitialMarginRate"</span><span class="p">:</span><span class="w">     </span><span class="s2">"0.05"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"effectiveMaintenanceMarginRate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.006"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"effectivePositionNotional"</span><span class="p">:</span><span class="w">      </span><span class="s2">"771.409098784"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"positionNotional"</span><span class="p">:</span><span class="w">               </span><span class="s2">"771.409098784"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"unsettledPnl"</span><span class="p">:</span><span class="w">                   </span><span class="s2">"137.126662384"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"settledPnl"</span><span class="p">:</span><span class="w">                     </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"unrealizedPnlTotal"</span><span class="p">:</span><span class="w">             </span><span class="s2">"137.126662384"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"takeoverMarginRate"</span><span class="p">:</span><span class="w">             </span><span class="s2">"0.003"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"walletBalance"</span><span class="p">:</span><span class="w">                  </span><span class="s2">"12980.23605"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You can obtain the status of the overall account from this API.</p>
<h4 id='permissions'>Permissions</h4>
<p>You need view permission to access this API.</p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET &lt;account-group&gt;/api/pro/futures/risk</code></p>
<h4 id='response-content'>Response Content</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountMarginRate</strong></td>
<td><code>String</code></td>
<td>account marging rate</td>
</tr>
<tr>
<td><strong>accountMaxLeverage</strong></td>
<td><code>String</code></td>
<td>account maximum leverage</td>
</tr>
<tr>
<td><strong>currentLeverage</strong></td>
<td><code>String</code></td>
<td>account current leverage</td>
</tr>
<tr>
<td><strong>effectiveInitialMarginRate</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>effectiveMaintenanceMarginRate</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>takeoverMarginRate</strong></td>
<td><code>String</code></td>
<td>the minimum margin rate an account must be above to avoid been taking over</td>
</tr>
<tr>
<td><strong>walletBalance</strong></td>
<td><code>String</code></td>
<td>total USDT value of all collaterals</td>
</tr>
<tr>
<td><strong>collateral</strong></td>
<td><code>String</code></td>
<td>account total collateral value in USDT</td>
</tr>
<tr>
<td><strong>collateralInUse</strong></td>
<td><code>String</code></td>
<td>amount of collateral already in use</td>
</tr>
<tr>
<td><strong>effectiveCollateral</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>freeCollateral</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>positionNotional</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>effectivePositionNotional</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>unsettledPnl</strong></td>
<td><code>String</code></td>
<td>unsettled PnL that will be rolled into settled PnL.</td>
</tr>
<tr>
<td><strong>settledPnl</strong></td>
<td><code>String</code></td>
<td>settled profit/loss (PnL)</td>
</tr>
</tbody></table>

<p><strong>Collateral</strong></p>

<p>You can only increase your exposure if have free collateral. You shall post more collaterals by depositing one or more collateral assets
to you account. </p>

<p><strong>Notional</strong></p>

<p><strong>Profit/Loss</strong> </p>
<h3 id='funding-payment-history'>Funding Payment History</h3>
<blockquote>
<p>Funding Payment History</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"fundingRate"</span><span class="p">:</span><span class="w">   </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"paymentInUSDT"</span><span class="p">:</span><span class="w"> </span><span class="s2">"26.800171872"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">        </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w">     </span><span class="mi">1580328000000</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"fundingRate"</span><span class="p">:</span><span class="w">   </span><span class="s2">"-0.001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"paymentInUSDT"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-26.740689873"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">        </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w">     </span><span class="mi">1580324400000</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"hasNext"</span><span class="p">:</span><span class="w">  </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"page"</span><span class="p">:</span><span class="w">     </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pageSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='permissions'>Permissions</h4>
<p>You need view permission to access this API.</p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET &lt;account-group&gt;/api/pro/v1/futures/funding-payments</code></p>
<h4 id='signature'>Signature</h4>
<p>You should sign the message in header as specified in <a href="#sign-a-request"><strong>Authenticate a RESTful Request</strong></a> section.</p>
<h4 id='prehash-string'>Prehash String</h4>
<p><code>&lt;timestamp&gt;+futures/funding-payments</code></p>
<h4 id='request-parameters'>Request Parameters</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Value Range</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>symbol</strong></td>
<td><code>String</code></td>
<td>No</td>
<td>symbols separated by comma</td>
<td></td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><code>Int</code></td>
<td>No</td>
<td>zero or positive integer</td>
<td></td>
</tr>
<tr>
<td><strong>pageSize</strong></td>
<td><code>Int</code></td>
<td>No</td>
<td>positive integer</td>
<td></td>
</tr>
</tbody></table>
<h4 id='response-content'>Response Content</h4>
<p>The response contains a list of funding payment records along with meta data for the pagination. </p>

<p>Each funding payment record contains the following fields:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Sample Response</th>
</tr>
</thead><tbody>
<tr>
<td><strong>fundingRate</strong></td>
<td><code>String</code></td>
<td>funding rate applied</td>
<td><code>&quot;0.001&quot;</code></td>
</tr>
<tr>
<td><strong>paymentInUSDT</strong></td>
<td><code>String</code></td>
<td>funding payment in USDT</td>
<td><code>&quot;26.800171872&quot;</code></td>
</tr>
<tr>
<td><strong>symbol</strong></td>
<td><code>String</code></td>
<td>contract symbol</td>
<td><code>&quot;BTC-PERP&quot;</code></td>
</tr>
<tr>
<td><strong>timestamp</strong></td>
<td><code>Long</code></td>
<td>UTC Timestamp in milliseconds</td>
<td><code>1580328000000</code></td>
</tr>
</tbody></table>
<h4 id='code-sample'>Code Sample</h4>
<p>Please refer to python code to <a href="https://github.com/???/query-futures-funding-payments.py">query funding payments</a></p>
<h3 id='wallet-transaction-history'>Wallet Transaction History</h3>
<blockquote>
<p>Wallet Transaction History </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"asset"</span><span class="p">:</span><span class="w">                </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"requestId"</span><span class="p">:</span><span class="w">            </span><span class="s2">"pliWaJuGmkIXfMP72VfFDp653WoNqNGc"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w">               </span><span class="s2">"500"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"commission"</span><span class="p">:</span><span class="w">           </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"destAddress"</span><span class="p">:</span><span class="w">          </span><span class="p">{</span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x19hKDKfziX6kdWv0jlwiiuDy8VKZfgpEem8CvBxW"</span><span class="p">},</span><span class="w">
        </span><span class="s2">"networkTransactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xSeBSYwTBxPEvX8rfMrjbd0XPRZjwhMbKBURVyGLsGa8ZoI1hUb4X8Z7G89lc7xKm"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"numConfirmations"</span><span class="p">:</span><span class="w">     </span><span class="mi">20</span><span class="p">,</span><span class="w">
        </span><span class="s2">"numConfirmed"</span><span class="p">:</span><span class="w">         </span><span class="mi">20</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w">               </span><span class="s2">"confirmed"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"time"</span><span class="p">:</span><span class="w">                 </span><span class="mi">1580657103000</span><span class="p">,</span><span class="w">
        </span><span class="s2">"transactionType"</span><span class="p">:</span><span class="w">      </span><span class="s2">"deposit"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"page"</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pageSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hasNext"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You can obtain history of wallet deposit/withdrawal transactions via this API.</p>
<h4 id='permissions'>Permissions</h4>
<p>You need view permission to access this API.</p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET /api/pro/wallet/transactions</code></p>

<p>You don&#39;t need to specify <code>&lt;account-group&gt;</code> for this API.</p>
<h4 id='request-parameters'>Request Parameters</h4>
<p>You can specify the following parameters:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>asset</strong></td>
<td><code>Optional[Int]</code></td>
<td>Null</td>
<td>asset code</td>
</tr>
<tr>
<td><strong>page</strong></td>
<td><code>Optional[Int]</code></td>
<td>1</td>
<td>page number, must be greater than 0.</td>
</tr>
<tr>
<td><strong>pageSize</strong></td>
<td><code>Optional[Int]</code></td>
<td>20</td>
<td>page size, must be greater than 0.</td>
</tr>
<tr>
<td><strong>startTs</strong></td>
<td><code>Optional[Long]</code></td>
<td>Time.Min</td>
<td>start of the query range, UTC timestamp in milliseconds</td>
</tr>
<tr>
<td><strong>endTs</strong></td>
<td><code>Optional[Long]</code></td>
<td>Time.Max</td>
<td>end of the query range, UTC timestamp in milliseconds</td>
</tr>
<tr>
<td><strong>txType</strong></td>
<td><code>Optional[String]</code></td>
<td>Null</td>
<td>the transaction type filter: <code>deposit</code> / <code>withdrawal</code></td>
</tr>
</tbody></table>
<h4 id='response-content'>Response Content</h4>
<p>The <code>data</code> field of the API response contains the paginated historical data. All records are sorted in reverse chronological order.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>page</strong></td>
<td><code>Int</code></td>
<td>page number, must be greater than 0.</td>
</tr>
<tr>
<td><strong>pageSize</strong></td>
<td><code>Int</code></td>
<td>page size, must be greater than 0.</td>
</tr>
<tr>
<td><strong>hasNext</strong></td>
<td><code>Boolean</code></td>
<td>if True, there are more records to show</td>
</tr>
<tr>
<td><strong>data</strong></td>
<td><code>List[Object]</code></td>
<td>a list of transaction records. See below for details</td>
</tr>
</tbody></table>

<p>Each transaction record contains the following fields:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>asset</strong></td>
<td><code>String</code></td>
<td>asset code</td>
</tr>
<tr>
<td><strong>requestId</strong></td>
<td><code>String</code></td>
<td>an unique identifier for the transaction</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td><code>String</code></td>
<td>amount in transaction</td>
</tr>
<tr>
<td><strong>commission</strong></td>
<td><code>String</code></td>
<td>commission charged</td>
</tr>
<tr>
<td><strong>destAddress</strong></td>
<td><code>Object</code></td>
<td>destination address ID, it usually contains an <code>address</code> field and an optional <code>destTag</code> field</td>
</tr>
<tr>
<td><strong>networkTransactionId</strong></td>
<td><code>String</code></td>
<td>the id/hash of the transaction, for transactions among exchange users, this field is &quot;-&quot;</td>
</tr>
<tr>
<td><strong>numConfirmations</strong></td>
<td><code>Int</code></td>
<td>deposit will be viewd as final after the number of blocks confirmed reaches this value</td>
</tr>
<tr>
<td><strong>numConfirmed</strong></td>
<td><code>Int</code></td>
<td>currently number of blocks confirmed</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td><code>String</code></td>
<td>reviewing / pending / confirmed / rejected</td>
</tr>
<tr>
<td><strong>time</strong></td>
<td><code>Long</code></td>
<td>UTC Timestamp in milliseconds</td>
</tr>
<tr>
<td><strong>transactionType</strong></td>
<td><code>String</code></td>
<td>deposit / withdrawal</td>
</tr>
</tbody></table>
<h2 id='transfer-fund-between-accounts'>Transfer Fund between Accounts</h2><h3 id='from-cash-to-futures-account'>From Cash to Futures Account</h3>
<blockquote>
<p>Request Body - Transfer Fund from Cash to Futures Account</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">URL</span><span class="w"> </span><span class="err">https</span><span class="p">:</span><span class="err">//bitmax-test.io/</span><span class="mi">0</span><span class="err">/api/pro/v</span><span class="mi">1</span><span class="err">/futures/transfer/deposit</span><span class="w"> 
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Sample response if the transfer was successful</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Sample response if the transfer failed </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">300011</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Not Enough Account Balance"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVALID_BALANCE"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='permissions'>Permissions</h4>
<p>You need transfer permission to access this API.</p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>POST /&lt;account-group&gt;/api/pro/v1/futures/transfer/deposit</code></p>
<h4 id='signature'>Signature</h4>
<p>You should sign the message in header as specified in <a href="#sign-a-request"><strong>Authenticate a RESTful Request</strong></a> section.</p>
<h4 id='prehash-string'>Prehash String</h4>
<p><code>&lt;timestamp&gt;+futures/transfer/deposit</code></p>
<h4 id='http-request-body'>HTTP Request Body</h4>
<p>The request body must be a JSON string with the following fields:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>asset</strong></td>
<td><code>String</code></td>
<td>asset to transfer</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td><code>String</code></td>
<td>amount to transfer</td>
</tr>
</tbody></table>
<h4 id='response'>Response</h4>
<p>If the transfer request succeeded, the API will respond with a simple object with <code>code=0</code>. If the transfer request failed, the API 
will respond with code other than 0 along with an error message.</p>
<h3 id='from-futures-to-cash-account'>From Futures to Cash Account</h3>
<blockquote>
<p>Request Body - Transfer Fund from Futures to Cash Account</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">URL</span><span class="w"> </span><span class="err">https</span><span class="p">:</span><span class="err">//bitmax-test.io/</span><span class="mi">0</span><span class="err">/api/pro/v</span><span class="mi">1</span><span class="err">/futures/transfer/withdraw</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Sample response if the transfer was successful</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Sample response if the transfer failed </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">300011</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Not Enough Account Balance"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVALID_BALANCE"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='permissions'>Permissions</h4>
<p>You need transfer permission to access this API.</p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>POST /&lt;account-group&gt;/api/pro/v1/futures/transfer/withdraw</code></p>
<h4 id='signature'>Signature</h4>
<p>You should sign the message in header as specified in <a href="#sign-a-request"><strong>Authenticate a RESTful Request</strong></a> section.</p>
<h4 id='prehash-string'>Prehash String</h4>
<p><code>&lt;timestamp&gt;+futures/transfer/withdraw</code></p>
<h4 id='http-request-body'>HTTP Request Body</h4>
<p>The request body must be a JSON string with the following fields:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>asset</strong></td>
<td><code>String</code></td>
<td>asset to transfer</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td><code>String</code></td>
<td>amount to transfer</td>
</tr>
</tbody></table>
<h4 id='response'>Response</h4>
<p>If the transfer request succeeded, the API will respond with a simple object with <code>code=0</code>. If the transfer request failed, the API 
will respond with code other than 0 along with an error message.</p>
<h2 id='order'>Order</h2><h3 id='place-an-order'>Place an Order</h3>
<blockquote>
<p>Place Order - Successful ACK Response (Status 200, code 0)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"ac"</span><span class="p">:</span><span class="w">        </span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fut1FfjKA3W1L7XZOipGKZNFBb34GRQ3"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"action"</span><span class="p">:</span><span class="w">    </span><span class="s2">"place-order"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w">        </span><span class="s2">"16e607e2b83a8bXHbAwwoqDo55c166fa"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w">   </span><span class="s2">"16e85b4d9b9a8bXHbAwwoqDoc3d66830"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Market"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">    </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w">  </span><span class="mi">1573576916201</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ack"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Place Order with <code>ACCEPT</code> respInst</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w">         </span><span class="s2">"iGwzbzWxxcHwno4b8VCvh8aaYCJaPALm"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w">       </span><span class="mi">1575403713964</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">     </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"orderPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7289.0"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"orderQty"</span><span class="p">:</span><span class="w">   </span><span class="s2">"0.00082"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"orderType"</span><span class="p">:</span><span class="w">  </span><span class="s2">"limit"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"side"</span><span class="p">:</span><span class="w">       </span><span class="s2">"sell"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"respInst"</span><span class="p">:</span><span class="w">   </span><span class="s2">"ACCEPT"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Successful ACCEPT Response (Status 200, code 0)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"ac"</span><span class="p">:</span><span class="w">        </span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fut1FfjKA3W1L7XZOipGKZNFBb34GRQ3"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"action"</span><span class="p">:</span><span class="w">    </span><span class="s2">"place-order"</span><span class="p">,</span><span class="w">          
        </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">            
            </span><span class="s2">"avgPx"</span><span class="p">:</span><span class="w">        </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"cumFee"</span><span class="p">:</span><span class="w">       </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"cumFilledQty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"errorCode"</span><span class="p">:</span><span class="w">    </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"feeAsset"</span><span class="p">:</span><span class="w">     </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"lastExecTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1575573998500</span><span class="p">,</span><span class="w">
            </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w">      </span><span class="s2">"a16ed787462fU9490877774N4KBHIVN0"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"orderQty"</span><span class="p">:</span><span class="w">     </span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"orderType"</span><span class="p">:</span><span class="w">    </span><span class="s2">"Limit"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"price"</span><span class="p">:</span><span class="w">        </span><span class="s2">"7019"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"seqNum"</span><span class="p">:</span><span class="w">       </span><span class="mi">2323407894</span><span class="p">,</span><span class="w">
            </span><span class="s2">"side"</span><span class="p">:</span><span class="w">         </span><span class="s2">"Buy"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w">       </span><span class="s2">"New"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"stopPrice"</span><span class="p">:</span><span class="w">    </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">       </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"execInst"</span><span class="p">:</span><span class="w">     </span><span class="s2">"NULL_VAL"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCEPT"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">   
</span></code></pre>
<blockquote>
<p>Place Order with <code>DONE</code> respInst </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w">        </span><span class="s2">"UHTe3uVB0KhNGatoRS10YgABwHW0fCYn"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w">      </span><span class="mi">1575348906131</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">    </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"orderQty"</span><span class="p">:</span><span class="w">  </span><span class="s2">"0.00082"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"side"</span><span class="p">:</span><span class="w">      </span><span class="s2">"buy"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"respInst"</span><span class="p">:</span><span class="w">  </span><span class="s2">"DONE"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Successful DONE Response (Status 200, code 0)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
 </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"ac"</span><span class="p">:</span><span class="w">        </span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MPXFNEYEJIJ93CREXT3LTCIDIJPCFNIX"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"action"</span><span class="p">:</span><span class="w">    </span><span class="s2">"place-order"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"avgPx"</span><span class="p">:</span><span class="w">        </span><span class="s2">"7399.99"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"cumFee"</span><span class="p">:</span><span class="w">       </span><span class="s2">"0.003296696"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"cumFilledQty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"errorCode"</span><span class="p">:</span><span class="w">    </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"feeAsset"</span><span class="p">:</span><span class="w">     </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w">           </span><span class="s2">"ROunD0hpprO2KEgkVK30FOIpPK3zuGGh"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"lastExecTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1575646514077</span><span class="p">,</span><span class="w">
        </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w">      </span><span class="s2">"a16edbd9aefaU9490877774pPK3zuGGh"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"orderQty"</span><span class="p">:</span><span class="w">     </span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"orderType"</span><span class="p">:</span><span class="w">    </span><span class="s2">"Market"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"price"</span><span class="p">:</span><span class="w">        </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"seqNum"</span><span class="p">:</span><span class="w">       </span><span class="mi">2348421435</span><span class="p">,</span><span class="w">
        </span><span class="s2">"side"</span><span class="p">:</span><span class="w">         </span><span class="s2">"Sell"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w">       </span><span class="s2">"Filled"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"stopPrice"</span><span class="p">:</span><span class="w">    </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">       </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"execInst"</span><span class="p">:</span><span class="w">     </span><span class="s2">"NULL_VAL"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DONE"</span><span class="p">}}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Place Order - Error Response (Status 200, code 300011)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w">      </span><span class="mi">300011</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ac"</span><span class="p">:</span><span class="w">        </span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fut1FfjKA3W1L7XZOipGKZNFBb34GRQ3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"action"</span><span class="p">:</span><span class="w">    </span><span class="s2">"place-order"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w">   </span><span class="s2">"Not Enough Account Balance"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reason"</span><span class="p">:</span><span class="w">    </span><span class="s2">"INVALID_BALANCE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w">    </span><span class="s2">"Err"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w">     </span><span class="s2">"JkpnjJRuBtFpW7F7PWDB7uwBEJtUOISZ"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERP"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>Place a new order.</p>
<h4 id='permissions'>Permissions</h4>
<p>You need trade permission to access this API.</p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>POST &lt;account-group&gt;/api/pro/v1/futures/order</code></p>
<h4 id='signature'>Signature</h4>
<p>You should sign the message in header as specified in <a href="#sign-a-request"><strong>Authenticate a RESTful Request</strong></a> section.</p>
<h4 id='prehash-string'>Prehash String</h4>
<p><code>&lt;timestamp&gt;+order</code></p>
<h4 id='request-parameters'>Request Parameters</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Value Range</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>symbol</strong></td>
<td>String</td>
<td>Yes</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>time</strong></td>
<td>Long</td>
<td>Yes</td>
<td>milliseconds since UNIX epoch in UTC</td>
<td>We do not process request placed more than 30 seconds ago.</td>
</tr>
<tr>
<td><strong>orderQty</strong></td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Order size. Please set scale properly for each symbol.</td>
</tr>
<tr>
<td><strong>orderType</strong></td>
<td>String</td>
<td>Yes</td>
<td>[&quot;market&quot;, &quot;limit&quot;]</td>
<td>Order type</td>
</tr>
<tr>
<td><strong>side</strong></td>
<td>String</td>
<td>Yes</td>
<td>[&quot;buy&quot;, &quot;sell&quot;]</td>
<td></td>
</tr>
<tr>
<td><strong>id</strong></td>
<td>String</td>
<td>No</td>
<td>&gt;=9 chars(letter and digit number only)</td>
<td>Optional but recommended. We echo it back to help you match response with request.</td>
</tr>
<tr>
<td><strong>orderPrice</strong></td>
<td>String</td>
<td>No</td>
<td></td>
<td>The limit price for limit order. Please set price scale properly.</td>
</tr>
<tr>
<td><strong>stopPrice</strong></td>
<td>String</td>
<td>No</td>
<td></td>
<td>Trigger price of stop limit order</td>
</tr>
<tr>
<td><strong>postOnly</strong></td>
<td>Boolean</td>
<td>No</td>
<td>[&quot;true&quot;, &quot;false&quot;]</td>
<td></td>
</tr>
<tr>
<td><strong>timeInForce</strong></td>
<td>String</td>
<td>No</td>
<td>[&quot;GTC&quot;, &quot;IOC&quot;]</td>
<td>GTC: good-till-canceled; IOC: immediate-or-cancel. GTC by default.</td>
</tr>
<tr>
<td><strong>respInst</strong></td>
<td>String</td>
<td>No</td>
<td>[&quot;ACK&quot;, &quot;ACCEPT&quot;, &quot;DONE&quot;]</td>
<td>Response instruction. Refer to &quot;Response&quot; below. &quot;ACK&quot; by default.</td>
</tr>
</tbody></table>

<p>The table below shows how to correctly configure order of different types: (o - required, x - optional)</p>

<table><thead>
<tr>
<th>Name</th>
<th>Market</th>
<th>Limit</th>
<th>StopMarket</th>
<th>StopLimit</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr>
<td><strong>time</strong></td>
<td>o</td>
<td>o</td>
<td>o</td>
<td>o</td>
</tr>
<tr>
<td><strong>symbol</strong></td>
<td>o</td>
<td>o</td>
<td>o</td>
<td>o</td>
</tr>
<tr>
<td><strong>orderPrice</strong></td>
<td></td>
<td>o</td>
<td></td>
<td>o</td>
</tr>
<tr>
<td><strong>orderQty</strong></td>
<td>o</td>
<td>o</td>
<td>o</td>
<td>o</td>
</tr>
<tr>
<td><strong>orderType</strong></td>
<td>o</td>
<td>o</td>
<td>o</td>
<td>o</td>
</tr>
<tr>
<td><strong>side</strong></td>
<td>o</td>
<td>o</td>
<td>o</td>
<td>o</td>
</tr>
<tr>
<td><strong>postOnly</strong></td>
<td></td>
<td>x</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>stopPrice</strong></td>
<td></td>
<td></td>
<td>o</td>
<td>o</td>
</tr>
<tr>
<td><strong>timeInForce</strong></td>
<td></td>
<td>x</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h4 id='order-request-criteria'>Order Request Criteria</h4>
<p>When placing a new <strong>limit</strong> order, the request parameters must meet all criteria defined in the <a href="#list-all-products">Products API</a>:</p>

<ul>
<li>The order notional must be within range <code>[minNotional, maxNotional]</code>. For limit orders, the order notional is defined as the product of <code>orderPrice</code> and <code>orderQty</code>.</li>
<li><code>orderPrice</code> and <code>stopPrice</code> must be multiples of <code>tickSize</code>.</li>
<li><code>orderQty</code> must be a multiple of <code>lotSize</code>.</li>
</ul>
<h4 id='response'>Response</h4>
<p>In &quot;Err&quot; response, <em>id</em> is the id provided by user when placing order; for other responses, <em>orderId</em> is the id generated by server following &quot;Order id generation method&quot; above, and this is the id you should provide for future order query or cancel. </p>

<p>In case you want to cancel an order before response from server, you could figure out the orderId following <strong>Order id generation method</strong> above.</p>

<p><em>ACK</em></p>

<p>Response with 0 <code>code</code> and status <code>Ack</code> to indicate new order request received by our server and passed some basic order field check. This is the default response type. If awaiting async order (ACCEPT or DONE) numbers exceeds capacity 1000, then the rest async order will be ACK automatically.</p>

<p><code>data</code> schema:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>avgPx</strong></td>
<td><code>String</code></td>
<td>average fill price</td>
</tr>
<tr>
<td><strong>cumFee</strong></td>
<td><code>String</code></td>
<td>cumulated filled comission</td>
</tr>
<tr>
<td><strong>cumFilledQty</strong></td>
<td><code>String</code></td>
<td>cumulated filled qty</td>
</tr>
<tr>
<td><strong>errorCode</strong></td>
<td><code>String</code></td>
<td>Could be empty</td>
</tr>
<tr>
<td><strong>feeAsset</strong></td>
<td><code>String</code></td>
<td>Fee asset, e.g, <code>USDT</code></td>
</tr>
<tr>
<td><strong>id</strong></td>
<td><code>String</code></td>
<td>id from request</td>
</tr>
<tr>
<td><strong>lastExecTime</strong></td>
<td><code>String</code></td>
<td>latest execution timestamp</td>
</tr>
<tr>
<td><strong>orderId</strong></td>
<td><code>String</code></td>
<td>order id</td>
</tr>
<tr>
<td><strong>orderQty</strong></td>
<td><code>String</code></td>
<td>order quantity</td>
</tr>
<tr>
<td><strong>orderType</strong></td>
<td><code>String</code></td>
<td>order type</td>
</tr>
<tr>
<td><strong>price</strong></td>
<td><code>String</code></td>
<td>order price</td>
</tr>
<tr>
<td><strong>seqNum</strong></td>
<td><code>Long</code></td>
<td>sequence number</td>
</tr>
<tr>
<td><strong>side</strong></td>
<td><code>String</code></td>
<td>order side</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td><code>String</code></td>
<td>order status</td>
</tr>
<tr>
<td><strong>stopPrice</strong></td>
<td><code>String</code></td>
<td>stop price(could be empty)</td>
</tr>
<tr>
<td><strong>symbol</strong></td>
<td><code>String</code></td>
<td>symbol</td>
</tr>
<tr>
<td><strong>execInst</strong></td>
<td><code>String</code></td>
<td>execution instruction, <code>POST</code> for Post-Only orders, <code>Liquidation</code> for forced-liquidation orders, and <code>NULL_VAL</code> otherwise.</td>
</tr>
</tbody></table>

<p><em>ACCEPT</em></p>

<p>Response with 0 <code>code</code> and status <code>ACCEPT</code> to indicate new order request is accepted by our match engine. Return normal &#39;Ack&#39; response if no &#39;New&#39; status update within 5 seconds. Order <code>status</code> in <code>data</code> could be <code>New</code>, or <code>PendingNew</code>.</p>

<p><em>DONE</em></p>

<p>Response with 0 <code>code</code> and status <code>Done</code> to indicate the order request is partially filled, fully filled, or rejected by matching engine. Return normal &#39;Ack&#39; response if no order status update within 5 seconds. Order <code>status</code> in <code>data</code> could be <code>Filled</code>, <code>PartiallyFilled</code>, <code>Cancelled</code>, or <code>Reject</code>, and so on.</p>

<p><em>ERR</em></p>

<p>Response with <code>code</code> other than 0 and  status <code>Err</code> to provide detailed error information on the order request. </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>code</strong></td>
<td><code>Long</code></td>
<td>non-zero value to indicate error</td>
</tr>
<tr>
<td><strong>ac</strong></td>
<td><code>String</code></td>
<td><code>FUTURES</code></td>
</tr>
<tr>
<td><strong>accountId</strong></td>
<td><code>String</code></td>
<td>account id</td>
</tr>
<tr>
<td><strong>action</strong></td>
<td><code>String</code></td>
<td><code>place-order</code></td>
</tr>
<tr>
<td><strong>message</strong></td>
<td><code>String</code></td>
<td>detail error message</td>
</tr>
<tr>
<td><strong>reason</strong></td>
<td><code>String</code></td>
<td>error info code, e.g. &quot;INVALID_ORDER_ID&quot;</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td><code>String</code></td>
<td>&quot;Err&quot;</td>
</tr>
<tr>
<td><strong>info</strong></td>
<td><code>Json</code></td>
<td>See below for details</td>
</tr>
</tbody></table>

<p><code>info</code> schema:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>symbol</strong></td>
<td><code>String</code></td>
<td>symbol</td>
</tr>
<tr>
<td><strong>id</strong></td>
<td><code>String</code></td>
<td>id from request if provided</td>
</tr>
</tbody></table>
<h3 id='cancel-an-order'>Cancel an Order</h3>
<blockquote>
<p>Cancel Order - Successful ACK Response (Status 200, code 0)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fut1FfjKA3W1L7XZOipGKZNFBb34GRQ3"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ac"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CASH"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancel-order"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ack"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w">        </span><span class="s2">"sPWweX8baCYeFsKdmqZEmHdpliWaJuGm"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w">   </span><span class="s2">"kIXfMP72VfFDp653WoNqNGcpZCK9W7ts"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">could</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">empty</span><span class="w">
            </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">    </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w">  </span><span class="mi">1573596082932</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Cancel Order - Error Response (Status 200, code 0)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">300006</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fut1FfjKA3W1L7XZOipGKZNFBb34GRQ3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ac"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CASH"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancel-order"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Err"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Client Order Id: ku30AehuWoHzMeyGEAS8heeDXpb1heOS"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reason"</span><span class="p">:</span><span class="w">  </span><span class="s2">"INVALID_ORDER_ID"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ku30AehuWoHzMeyGEAS8heeDXpb1heOS"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">  </span><span class="s2">"BTC-PERP"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Cancel an existing open order. </p>
<h4 id='permissions'>Permissions</h4>
<p>You need trade permission to access this API.</p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>DELETE &lt;account-group&gt;/api/pro/v1/futures/order</code></p>
<h4 id='signature'>Signature</h4>
<p>You should sign the message in header as specified in <a href="#sign-a-request"><strong>Authenticate a RESTful Request</strong></a> section.</p>
<h4 id='prehash-string'>Prehash String</h4>
<p><code>&lt;timestamp&gt;+order</code></p>
<h4 id='request-parameters'>Request Parameters</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Value Range</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Yes</td>
<td>32 chars(letter and digit number only)</td>
<td>Please generate unique ID for each trade; we will echo it back to help you identify the response.</td>
</tr>
<tr>
<td>orderId</td>
<td>String</td>
<td>Yes</td>
<td>32 chars order id responded by server when place order</td>
<td></td>
</tr>
<tr>
<td>symbol</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td></td>
</tr>
<tr>
<td>time</td>
<td>Long</td>
<td>Yes</td>
<td>milliseconds since UNIX epoch in UTC</td>
<td>We do not process request placed more than 30 seconds ago.</td>
</tr>
</tbody></table>
<h4 id='response'>Response</h4>
<p><em>ACK</em></p>

<p>Response with status &quot;Ack&quot; to indicate the cancel order request is received by server. And you should use provided &quot;orderId&quot; to check cancel status in the future; we also echo back <em>id</em> from your request for reference purpose.</p>

<p><em>ERR</em></p>

<p>Response with status &quot;Err&quot; to indicate there is something wrong with the cancel order request. We echo back the <em>coid</em> field in your request.</p>
<h3 id='list-open-orders'>List Open Orders</h3>
<blockquote>
<p>Open Orders - Successful Response (Status 200, code 0)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"accountCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cshQtyfq8XLAA9kcf19h8bXHbAwwoqDo"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
     </span><span class="s2">"avgPx"</span><span class="p">:</span><span class="w">         </span><span class="s2">"0"</span><span class="p">,</span><span class="w">           </span><span class="err">//</span><span class="w"> </span><span class="err">Average</span><span class="w"> </span><span class="err">filled</span><span class="w"> </span><span class="err">price</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">order</span><span class="w">   
      </span><span class="s2">"cumFee"</span><span class="p">:</span><span class="w">       </span><span class="s2">"0"</span><span class="p">,</span><span class="w">           </span><span class="err">//</span><span class="w"> </span><span class="err">cumulative</span><span class="w"> </span><span class="err">fee</span><span class="w"> </span><span class="err">paid</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">order</span><span class="w">
      </span><span class="s2">"cumFilledQty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">           </span><span class="err">//</span><span class="w"> </span><span class="err">cumulative</span><span class="w"> </span><span class="err">filled</span><span class="w"> </span><span class="err">quantity</span><span class="w">
      </span><span class="s2">"errorCode"</span><span class="p">:</span><span class="w">    </span><span class="s2">""</span><span class="p">,</span><span class="w">            </span><span class="err">//</span><span class="w"> </span><span class="err">error</span><span class="w"> </span><span class="err">code;</span><span class="w"> </span><span class="err">could</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">empty</span><span class="w">
      </span><span class="s2">"feeAsset"</span><span class="p">:</span><span class="w">     </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">        </span><span class="err">//</span><span class="w"> </span><span class="err">fee</span><span class="w"> </span><span class="err">asset</span><span class="w">
      </span><span class="s2">"lastExecTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1576019723550</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w">  </span><span class="err">The</span><span class="w"> </span><span class="err">last</span><span class="w"> </span><span class="err">execution</span><span class="w"> </span><span class="err">time</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">order</span><span class="w">
      </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w">      </span><span class="s2">"s16ef21882ea0866943712034f36d83"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">server</span><span class="w"> </span><span class="err">provided</span><span class="w"> </span><span class="err">orderId</span><span class="w">
      </span><span class="s2">"orderQty"</span><span class="p">:</span><span class="w">     </span><span class="s2">"0.0083"</span><span class="p">,</span><span class="w">      </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">quantity</span><span class="w">
      </span><span class="s2">"orderType"</span><span class="p">:</span><span class="w">    </span><span class="s2">"Limit"</span><span class="p">,</span><span class="w">       </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">type</span><span class="w">
      </span><span class="s2">"price"</span><span class="p">:</span><span class="w">        </span><span class="s2">"7105"</span><span class="p">,</span><span class="w">        </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">price</span><span class="w">
      </span><span class="s2">"seqNum"</span><span class="p">:</span><span class="w">       </span><span class="mi">8193258</span><span class="p">,</span><span class="w">       </span><span class="err">//</span><span class="w"> </span><span class="err">sequence</span><span class="w"> </span><span class="err">number</span><span class="w">
      </span><span class="s2">"side"</span><span class="p">:</span><span class="w">         </span><span class="s2">"Buy"</span><span class="p">,</span><span class="w">         </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">side</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w">       </span><span class="s2">"New"</span><span class="p">,</span><span class="w">         </span><span class="err">//</span><span class="w"> </span><span class="err">order</span><span class="w"> </span><span class="err">status</span><span class="w"> </span><span class="err">on</span><span class="w"> </span><span class="err">matching</span><span class="w"> </span><span class="err">engine</span><span class="w">
      </span><span class="s2">"stopPrice"</span><span class="p">:</span><span class="w">    </span><span class="s2">""</span><span class="p">,</span><span class="w">            </span><span class="err">//</span><span class="w"> </span><span class="err">only</span><span class="w"> </span><span class="err">available</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">stop</span><span class="w"> </span><span class="err">market</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">stop</span><span class="w"> </span><span class="err">limit</span><span class="w"> </span><span class="err">orders;</span><span class="w"> </span><span class="err">otherwise</span><span class="w"> </span><span class="err">empty</span><span class="w"> 
      </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">       </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">          
      </span><span class="s2">"execInst"</span><span class="p">:</span><span class="w">     </span><span class="s2">"NULL_VAL"</span><span class="w">     </span><span class="err">//</span><span class="w"> </span><span class="err">execution</span><span class="w"> </span><span class="err">instruction</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This API returns all current open orders for the account specified. </p>
<h4 id='permissions'>Permissions</h4>
<p>You need view permission to access this API.</p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET &lt;account-group&gt;/api/pro/v1/futures/order/open</code></p>
<h4 id='signature'>Signature</h4>
<p>You should sign the message in header as specified in <a href="#sign-a-request"><strong>Authenticate a RESTful Request</strong></a> section.</p>
<h4 id='prehash-string'>Prehash String</h4>
<p><code>&lt;timestamp&gt;+order/open</code></p>
<h4 id='response'>Response</h4>
<p>Return a list of order infomation in <code>data</code> field:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>avgPx</strong></td>
<td><code>String</code></td>
<td>average fill price</td>
</tr>
<tr>
<td><strong>cumFee</strong></td>
<td><code>String</code></td>
<td>cumulated filled comission</td>
</tr>
<tr>
<td><strong>cumFilledQty</strong></td>
<td><code>String</code></td>
<td>cumulated filled qty</td>
</tr>
<tr>
<td><strong>errorCode</strong></td>
<td><code>String</code></td>
<td>Could be empty</td>
</tr>
<tr>
<td><strong>feeAsset</strong></td>
<td><code>String</code></td>
<td>Fee asset, e.g, <code>USDT</code></td>
</tr>
<tr>
<td><strong>lastExecTime</strong></td>
<td><code>String</code></td>
<td>latest execution timestamp</td>
</tr>
<tr>
<td><strong>orderId</strong></td>
<td><code>String</code></td>
<td>order id</td>
</tr>
<tr>
<td><strong>orderQty</strong></td>
<td><code>String</code></td>
<td>order quantity</td>
</tr>
<tr>
<td><strong>orderType</strong></td>
<td><code>String</code></td>
<td>order type</td>
</tr>
<tr>
<td><strong>price</strong></td>
<td><code>String</code></td>
<td>order price</td>
</tr>
<tr>
<td><strong>seqNum</strong></td>
<td><code>Long</code></td>
<td>sequence number</td>
</tr>
<tr>
<td><strong>side</strong></td>
<td><code>String</code></td>
<td>order side</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td><code>String</code></td>
<td>order status</td>
</tr>
<tr>
<td><strong>stopPrice</strong></td>
<td><code>String</code></td>
<td>stop price(could be empty)</td>
</tr>
<tr>
<td><strong>symbol</strong></td>
<td><code>String</code></td>
<td>symbol</td>
</tr>
<tr>
<td><strong>execInst</strong></td>
<td><code>String</code></td>
<td>execution instruction, <code>POST</code> for Post-Only orders, <code>Liquidation</code> for forced-liquidation orders, and <code>NULL_VAL</code> otherwise.</td>
</tr>
</tbody></table>
<h4 id='code-sample'>Code Sample</h4>
<p>Please refer to python code to <a href="https://github.com/???/query_order.py">get open orders</a></p>

<p>Change from the previous version:</p>

<ul>
<li><code>errorCode</code> is no longer included in the open order response. It is still included in the historical order query response.</li>
</ul>
<h3 id='historical-orders'>Historical Orders</h3><h1 id='websocket'>WebSocket</h1><h2 id='guidelines'>Guidelines</h2><h3 id='general-message-request-handling-logic-from-client-side'>General Message Request/Handling Logic from Client Side</h3>
<ul>
<li>Client usually initiate request with <code>op</code> parameter (followed by other required parameters).</li>
<li>Server usually reply message with <code>m</code> value to indicate message topic, e.g., <code>order</code>, <code>depth</code>, <code>auth</code>.</li>
<li>Private data response usually has <code>accountId</code> field, such as <code>order</code>, <code>balance</code>; public data response usually contains <code>symbol</code> field.</li>
<li>Uniquie <code>id</code> parameter is recommended for your request. We will echo it back for you to track the requests. (The only exception is <code>depth-snapshot</code>, we do not include <code>id</code>)</li>
</ul>
<h3 id='websocket-request'>WebSocket Request</h3>
<p><code>WSS &lt;account-group&gt;/api/pro/v1/stream</code></p>

<p>In order to authorize the session you must include <code>&lt;account-group&gt;</code> in the URL. Without <code>&lt;account-group&gt;</code>, you can 
only subscribe to public data. </p>
<h3 id='keep-the-connection-alive-via-ping-pong'>Keep the Connection Alive via Ping/Pong</h3>
<p>In order to keep the websocket connection alive, you have two options, detailed below.</p>
<h4 id='method-1-responding-to-server-ping-messages'>Method 1: Responding to Server ping messages</h4>
<blockquote>
<p>Method 1. keep the connection alive by responding to Server pushed ping message </p>
</blockquote>
<pre class="highlight plaintext"><code>&lt;&lt;&lt; { "m": "ping", "hp": 3 }  # Server pushed ping message
&gt;&gt;&gt; { "op": "pong" }   # Client responds with pong
</code></pre>
<p>If the server doesn&#39;t receive any client message after a while, it will send a <code>ping</code> message to the client. Once the <code>ping</code> message is received,
the client should promptly send a <code>pong</code> message to the server. If you missed two consecutive <code>ping</code> messages, the session will be disconnected. </p>

<p><strong>Server Ping Message Schema</strong> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>op</strong></td>
<td><code>String</code></td>
<td><code>ping</code></td>
</tr>
<tr>
<td><strong>hp</strong></td>
<td><code>Int</code></td>
<td>health point: when this value decreases to 0, the session will be disconnected.</td>
</tr>
</tbody></table>
<h4 id='method-2-sending-ping-messages-to-server'>Method 2: Sending ping messages to Server</h4>
<blockquote>
<p>Method 2. keep the connection alive by sending ping message to the server</p>
</blockquote>
<pre class="highlight plaintext"><code>&gt;&gt;&gt; { "op": "ping" }                                      # Client initiated ping message (every 30 seconds)
&lt;&lt;&lt; { "m":"pong", "code":0, "ts":1574260701259, "hp": 2 } # Server responds to client ping 
</code></pre>
<p>You can also send <code>ping</code> message to the server every 15 seconds to keep the connection alive. The server will stop sending <code>ping</code> message 
for 30 seconds if a client initiated <code>ping</code> message is received. </p>

<p><strong>Server Pong Message Schema</strong> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>m</strong></td>
<td><code>String</code></td>
<td><code>pong</code></td>
</tr>
<tr>
<td><strong>code</strong></td>
<td><code>Int</code></td>
<td>error code, for the pong mesage, the error code is always 0 (success)</td>
</tr>
<tr>
<td><strong>ts</strong></td>
<td><code>Long</code></td>
<td>server time in UTC miliseconds</td>
</tr>
<tr>
<td><strong>hp</strong></td>
<td><code>Int</code></td>
<td>health point: when this value decreases to 0, the session will be disconnected.</td>
</tr>
</tbody></table>
<h2 id='websocket-authentication'>WebSocket Authentication</h2>
<p>You must authenticate the websocket session in order to recieve private data and send account specific requests 
(e.g. placing new orders). </p>

<p>You have two options to authenticate a websocket session. </p>

<ul>
<li>by adding authentication data in the request header when connecting to websocket. </li>
<li>by sending an <code>op:auth</code> message to the server after you have connected to websocket. </li>
</ul>

<p>Once you successfully connect to the websocket, you will receive a <code>connected</code> message: </p>

<ul>
<li>for authenticated websocket session: <code>{&quot;op&quot;:&quot;connected&quot;,&quot;type&quot;:&quot;auth&quot;}</code></li>
<li>for unauthenticated websocket session: <code>{&quot;op&quot;:&quot;connected&quot;,&quot;type&quot;:&quot;unauth&quot;}</code></li>
</ul>

<p>If the session is disconnected for some reason, you will receive a <code>disconnected</code> message:</p>

<ul>
<li><code>{&quot;m&quot;:&quot;disconnected&quot;,&quot;code&quot;:100005,&quot;reason&quot;:&quot;INVALID_WS_REQUEST_DATA&quot;,&quot;info&quot;:&quot;Session is disconnected due to missing pong message from the client&quot;}</code></li>
</ul>
<h3 id='method-1-websocket-authentication-with-request-headers'>Method 1 - WebSocket Authentication with Request Headers</h3>
<blockquote>
<p>Authenticate with Headers</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># # Install wscat from Node.js if you haven't</span>
<span class="c"># npm install -g wscat  </span>

<span class="nv">APIPATH</span><span class="o">=</span>stream
<span class="nv">APIKEY</span><span class="o">=</span>BclE7dBGbS1AP3VnOuq6s8fJH0fWbH7r
<span class="nv">SECRET</span><span class="o">=</span>fAZcQRUMxj3eX3DreIjFcPiJ9UR3ZTdgIw8mxddvtcDxLoXvdbXJuFQYadUUsF7q
<span class="nv">TIMESTAMP</span><span class="o">=</span><span class="sb">`</span>date +%s%N | cut -c -13<span class="sb">`</span>
<span class="nv">MESSAGE</span><span class="o">=</span><span class="nv">$TIMESTAMP</span>+<span class="nv">$APIPATH</span>
<span class="nv">SIGNATURE</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$MESSAGE</span> | openssl dgst -sha256 -hmac <span class="nv">$SECRET</span> -binary | base64<span class="sb">`</span>

wscat -H <span class="s2">"x-auth-key: </span><span class="nv">$APIKEY</span><span class="s2">"</span> <span class="se">\</span>
  -H <span class="s2">"x-auth-signature: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span> <span class="se">\</span>
  -H <span class="s2">"x-auth-timestamp: </span><span class="nv">$TIMESTAMP</span><span class="s2">"</span> <span class="se">\</span>
  -c wss://bitmax.io/1/api/v1/t/stream -w 1 -x <span class="s1">'{"op":"sub", "id": "abc123", "ch": "order:futZtmicU8Ls03xldo112uxpICXulxXd"}'</span>
</code></pre>
<p>This is similar to the way you authenticate any RESTful request. You need to add the following header fields to the 
connection request:</p>

<ul>
<li><code>x-auth-key</code></li>
<li><code>x-auth-timestamp</code></li>
<li><code>x-auth-signature</code></li>
</ul>

<p>The server will then check if the data is correctly signed before upgrading the connection protocol to WebSocket. </p>

<p>Note that if you specify these header fields, the server will reject the websocket connection request if authentication fails. </p>
<h3 id='method-2-websocket-authentication-by-sending-the-auth-message'>Method 2 - WebSocket Authentication by Sending the Auth Message</h3>
<blockquote>
<p>Authenticate by Sending the <code>auth</code> Message</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># # Install wscat from Node.js if you haven't</span>
<span class="c"># npm install -g wscat  </span>

<span class="nv">APIPATH</span><span class="o">=</span>stream
<span class="nv">APIKEY</span><span class="o">=</span>BclE7dBGbS1AP3VnOuq6s8fJH0fWbH7r
<span class="nv">SECRET</span><span class="o">=</span>fAZcQRUMxj3eX3DreIjFcPiJ9UR3ZTdgIw8mxddvtcDxLoXvdbXJuFQYadUUsF7q
<span class="nv">TIMESTAMP</span><span class="o">=</span><span class="sb">`</span>date +%s%N | cut -c -13<span class="sb">`</span>
<span class="nv">MESSAGE</span><span class="o">=</span><span class="nv">$TIMESTAMP</span>+<span class="nv">$APIPATH</span>
<span class="nv">SIGNATURE</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$MESSAGE</span> | openssl dgst -sha256 -hmac <span class="nv">$SECRET</span> -binary | base64<span class="sb">`</span>

wscat -c wss://bitmax.io/1/api/pro/stream -w 1 -x <span class="s2">"{</span><span class="se">\"</span><span class="s2">op</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">auth</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">id</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">abc123</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">t</span><span class="se">\"</span><span class="s2">: </span><span class="nv">$TIMESTAMP</span><span class="s2">, "</span>key<span class="s2">": </span><span class="se">\"</span><span class="nv">$APIKEY</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">sig</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$SIGNATURE</span><span class="se">\"</span><span class="s2">}"</span>
</code></pre>
<p>You can also authenticate a live websocket session by sending an <code>op:auth</code> message to the server. </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>op</strong></td>
<td><code>String</code></td>
<td>Yes</td>
<td><code>&quot;auth&quot;</code></td>
</tr>
<tr>
<td><strong>id</strong></td>
<td><code>String</code></td>
<td>No</td>
<td>optional id field, you may safely skip it</td>
</tr>
<tr>
<td><strong>t</strong></td>
<td><code>Long</code></td>
<td>Yes</td>
<td>UTC timestamp in milliseconds, use this timestamp to generate signature</td>
</tr>
<tr>
<td><strong>key</strong></td>
<td><code>String</code></td>
<td>Yes</td>
<td>your api key</td>
</tr>
<tr>
<td><strong>sig</strong></td>
<td><code>String</code></td>
<td>Yes</td>
<td>the signature is generated by signing <code>&quot;&lt;timestamp&gt;+stream&quot;</code></td>
</tr>
</tbody></table>

<p>More comprehensive examples can be found at:</p>

<ul>
<li>Python for <a href="https://github.com/bitmax-exchange/bitmax-pro-api-demo/blob/master/python/websocket_auth.py">websocket auth</a></li>
</ul>
<h3 id='authentication-response'>Authentication Response</h3>
<blockquote>
<p>Auth success message</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">  
  </span><span class="s2">"m"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Auth error message</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"m"</span><span class="p">:</span><span class="s2">"auth"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">200006</span><span class="p">,</span><span class="w">
  </span><span class="s2">"err"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unable to find User Account Data"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You will receive a message for authentication result after you send authentication request.</p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>m</strong></td>
<td><code>String</code></td>
<td><code>&quot;auth&quot;</code></td>
</tr>
<tr>
<td><strong>id</strong></td>
<td><code>String</code></td>
<td>echo back the id if you provide one in the request</td>
</tr>
<tr>
<td><strong>code</strong></td>
<td><code>Long</code></td>
<td>Any code other than 0 indicate an error in authentication</td>
</tr>
<tr>
<td><strong>err</strong></td>
<td><code>Optional[String]</code></td>
<td>Provide detailed error message if code is not 0</td>
</tr>
</tbody></table>
<h2 id='subscribe-to-data-channels'>Subscribe to Data Channels</h2><h3 id='how-to-subscribe'>How to Subscribe</h3>
<blockquote>
<p>Use <code>wscat</code> from Node.js to connect to websocket data.</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># # Install wscat from Node.js if you haven't</span>
<span class="c"># npm install -g wscat  </span>
npm install -g wscat

<span class="c"># Connect to websocket</span>
wscat -c wss://bitmax-test.io/0/api/pro/v1/stream -x <span class="s1">'{"op":"sub", "ch": "depth:BTC-PERP"}'</span>
</code></pre>
<blockquote>
<p>You can also setup authorized session</p>
</blockquote>
<pre class="highlight shell"><code>@ToDo
</code></pre>
<p>You can <strong>subscribe/unsubscribe</strong> to one or multiple data channels.</p>

<ul>
<li>If the subscription is successful, you will receive at least one ack message confirming the request is successful and you will start receiving data streams. </li>
<li>If the subscription is unsuccessful, you will receive one ack message with text explaining why the subscription failed. </li>
</ul>
<h4 id='request-body-schema'>Request Body Schema</h4>
<p>The standard messages to subscribe to / unsubscribe from data channels is an JSON object with fields:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>op</strong></td>
<td><code>String</code></td>
<td><code>sub</code> to subscribe and <code>unsub</code> to unsubscribe</td>
</tr>
<tr>
<td><strong>id</strong></td>
<td><code>Optional[String]</code></td>
<td>user specified UUID, if provided, the server will echo back this value in the response message</td>
</tr>
<tr>
<td><strong>ch</strong></td>
<td><code>String</code></td>
<td>name of the data channel with optional arguments, see below for details</td>
</tr>
</tbody></table>

<blockquote>
<p>Subscribe to <em>bbo</em> stream for symbol <code>BTC-PERP</code></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd1234"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bbo:BTC-PERP"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Subscribe to <em>ref-px</em> stream for symbol <code>BTC</code></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd1234"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ref-px:BTC"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Subscribe to <em>trade</em> stream for one contract</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd1234"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"trades:BTC-PERP"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Unsubscribes from the <em>depth</em> stream for all symbols (method 1)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unsub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd1234"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"depth:*"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Unsubscribes from the <em>depth</em> stream for all symbols (methond 2)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unsub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd1234"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"depth"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Unsubscribes from the 1 minute <em>bar</em> streams for all symbols (method 1)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unsub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd1234"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar:1:*"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Unsubscribes from the 1 minute <em>bar</em> streams for all symbols (method 2)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unsub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd1234"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar:1"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Unsubscribes from <em>bar</em> streams of all frequencies for <code>BTC-PERP</code></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unsub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd1234"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar:*:BTC-PERP"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='customize-channel-content-with-ch'>Customize Channel content with <code>ch</code></h4>
<p>You can customize the channel content by setting <code>ch</code> according to the table below:</p>

<table><thead>
<tr>
<th>Type</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>public</td>
<td><code>depth:&lt;symbol&gt;</code></td>
<td>Updates to order book levels.</td>
</tr>
<tr>
<td>public</td>
<td><code>bbo:&lt;symbol&gt;</code></td>
<td>Price and size at best bid and ask levels on the order book.</td>
</tr>
<tr>
<td>public</td>
<td><code>trades:&lt;symbol&gt;</code></td>
<td>Market trade data</td>
</tr>
<tr>
<td>public</td>
<td><code>bar:&lt;interval&gt;:&lt;symbol&gt;</code></td>
<td>Bar data containing O/C/H/L prices and volume for specific time intervals</td>
</tr>
<tr>
<td>public</td>
<td><code>ref-px:&lt;symbol&gt;</code></td>
<td>Reference prices used by margin risk Calculation.</td>
</tr>
<tr>
<td>public</td>
<td><code>ticker:&lt;symbol&gt;</code></td>
<td>Ticker ???</td>
</tr>
<tr>
<td>public</td>
<td><code>futures-market-data</code></td>
<td>Futures market data ???</td>
</tr>
<tr>
<td>Private</td>
<td><code>order:&lt;account&gt;</code></td>
<td>Order Update Stream: &quot;futures&quot;, or actual accountId for account.</td>
</tr>
</tbody></table>

<p><em>Symbol</em> in <em>ref-px</em> is single asset symbol(e.g. <code>BTC</code>), not trading pair symbol (e.g. <code>BTC-PERP</code>), which is different from other channels.</p>
<h4 id='unsubscribe-with-wildcard-character'>Unsubscribe with Wildcard Character <code>*</code></h4>
<p>Using the wildcard character <code>*</code>, you can unsubscribe from multiple channels with the same channel name.</p>
<h3 id='channel-bar-data'>Channel: Bar Data</h3>
<blockquote>
<p>Subscribe to <code>BTC-PERP</code> 1 minute bar stream</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="s2">"bar:1:BTC-PERP"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Unsubscribe to <code>BTC-PERP</code> 1 minute bar stream</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unsub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="s2">"bar:1:BTC-PERP"</span><span class="w"> </span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w">  </span><span class="err">Alternatively</span><span class="p">,</span><span class="w"> </span><span class="err">you</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">unsubscribe</span><span class="w"> </span><span class="err">all</span><span class="w"> </span><span class="err">bar</span><span class="w"> </span><span class="err">streams</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">BTC-PERP</span><span class="w">
</span><span class="p">{</span><span class="w"> </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unsub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="s2">"bar:*:BTC-PERP"</span><span class="w"> </span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Or</span><span class="w"> </span><span class="err">unsubscribe</span><span class="w"> </span><span class="err">all</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">minute</span><span class="w"> </span><span class="err">bar</span><span class="w"> </span><span class="err">stream</span><span class="w">
</span><span class="p">{</span><span class="w"> </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unsub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="s2">"bar:1"</span><span class="w"> </span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Or</span><span class="w"> </span><span class="err">unsubscribe</span><span class="w"> </span><span class="err">all</span><span class="w"> </span><span class="err">bar</span><span class="w"> </span><span class="err">stream</span><span class="w">
</span><span class="p">{</span><span class="w"> </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unsub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="s2">"bar"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bar Data Sample Message </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"m"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"s"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">    
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"i"</span><span class="p">:</span><span class="w">  </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1575398940000</span><span class="p">,</span><span class="w">
        </span><span class="s2">"o"</span><span class="p">:</span><span class="w">  </span><span class="s2">"8500.25"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"c"</span><span class="p">:</span><span class="w">  </span><span class="s2">"8510.75"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"h"</span><span class="p">:</span><span class="w">  </span><span class="s2">"8519"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"l"</span><span class="p">:</span><span class="w">  </span><span class="s2">"8500.25"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"v"</span><span class="p">:</span><span class="w">  </span><span class="s2">"54.12"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='channel'>Channel</h4>
<p><code>bar</code></p>
<h4 id='message-schema'>Message Schema</h4>
<p>The <code>data</code> field is a list containing one or more trade objects. The server may combine consecutive trades with the same price and <code>bm</code> 
value into one aggregated item. Each trade object contains the following fields:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>seqnum</strong></td>
<td><code>Long</code></td>
<td>the sequence number of the trade record. <code>seqnum</code> is always increasing for each symbol, but may not be consecutive</td>
</tr>
<tr>
<td><strong>p</strong></td>
<td><code>String</code></td>
<td>the executed price expressed as a string</td>
</tr>
<tr>
<td><strong>q</strong></td>
<td><code>String</code></td>
<td>the aggregated traded amount expressed as string</td>
</tr>
<tr>
<td><strong>ts</strong></td>
<td><code>Long</code></td>
<td>the UTC timestamp in milliseconds of the first trade</td>
</tr>
<tr>
<td><strong>bm</strong></td>
<td><code>Boolean</code></td>
<td>if true, the buyer of the trade is the maker.</td>
</tr>
</tbody></table>
<h3 id='channel-level-1-order-book-data-bbo'>Channel: Level 1 Order Book Data (BBO)</h3>
<blockquote>
<p>Subscribe to <code>BTC-PERP</code> quote stream</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="s2">"bbo:BTC-PERP"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Unsubscribe to <code>BTC-PERP</code> quote stream</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unsub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="s2">"bbo:BTC-PERP"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>BBO Message </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"m"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bbo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1573068442532</span><span class="p">,</span><span class="w">
    </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"bid"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"9309.11"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"0.25"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"ask"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"9309.12"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"0.5"</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You can subscribe to updates of best bid/offer data stream only. Once subscribed, you will receive BBO message whenever 
the price and/or size changes at the top of the order book. </p>

<p>Each BBO message contains price and size data for exactly one bid level and one ask level. </p>
<h3 id='channel-level-2-order-book-updates'>Channel: Level 2 Order Book Updates</h3>
<blockquote>
<p>Subscribe to <code>BTC-PERP</code> depth updates stream</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="s2">"depth:BTC-PERP"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Unsubscribe to <code>BTC-PERP</code> depth updates stream</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unsub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="s2">"depth:BTC-PERP"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>The Depth Message </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"m"</span><span class="p">:</span><span class="w"> </span><span class="s2">"depth"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1573069021376</span><span class="p">,</span><span class="w">
        </span><span class="s2">"seqnum"</span><span class="p">:</span><span class="w"> </span><span class="mi">2097965</span><span class="p">,</span><span class="w">
        </span><span class="s2">"asks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="s2">"0.06844"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"10760"</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"bids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="s2">"0.06777"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"562.4"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="s2">"0.05"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"221760.6"</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If you want to keep track of the most recent order book snapshot in its entirety, the most efficient way is to subscribe to the <code>depth</code> channel. </p>

<p>Each <code>depth</code> message contains a <code>bids</code> list and an <code>asks</code> list in its <code>data</code> field. Each list contains a series of <code>[price, size]</code> pairs that 
you can use to update the order book snapshot. In the message, <code>price</code> is always positive and <code>size</code> is always non-negative. </p>

<ul>
<li>if <code>size</code> is positive and the <code>price</code> doesn&#39;t exist in the current order book, you should <strong>add</strong> a new level <code>[price, size]</code>. </li>
<li>if <code>size</code> is positive and the <code>price</code> exists in the current order book, you should <strong>update</strong> the existing level to <code>[price, size]</code>. </li>
<li>if <code>size</code> is zero, you should <strong>delete</strong> the level at <code>price</code>. </li>
</ul>

<p>See <a href="#orderbook-snapshot">Orderbook Snapshot</a> for code examples.</p>
<h3 id='channel-futures-market-data'>Channel: Futures Market Data</h3>
<blockquote>
<p>Subscribe to Futures Market Data</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">Subscribe</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">all</span><span class="w"> </span><span class="err">symbols</span><span class="w">
</span><span class="p">{</span><span class="s2">"op"</span><span class="p">:</span><span class="s2">"sub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="s2">"futures-market-data"</span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="s2">"op"</span><span class="p">:</span><span class="s2">"sub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="s2">"futures-market-data:*"</span><span class="p">}</span><span class="w">

</span><span class="err">#</span><span class="w"> </span><span class="err">Subscribe</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">symbol</span><span class="w">
</span><span class="p">{</span><span class="s2">"op"</span><span class="p">:</span><span class="s2">"sub"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ch"</span><span class="p">:</span><span class="s2">"futures-market-data:BTC-PERP"</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Futures Market Data Sample Message</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"m"</span><span class="p">:</span><span class="w"> </span><span class="s2">"futures-market-data"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"s"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"oi"</span><span class="p">:</span><span class="w">   </span><span class="s2">"9000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fr"</span><span class="p">:</span><span class="w">   </span><span class="s2">"-0.001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fpf"</span><span class="p">:</span><span class="w">  </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ip"</span><span class="p">:</span><span class="w">   </span><span class="s2">"8777.155"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mp"</span><span class="p">:</span><span class="w">   </span><span class="s2">"8432.514108733"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"srct"</span><span class="p">:</span><span class="w"> </span><span class="mi">1580147455260</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fpt"</span><span class="p">:</span><span class="w">  </span><span class="mi">1580144400000</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='channel'>Channel</h4>
<p><code>futures-market-data</code> </p>
<h4 id='message-schema'>Message Schema</h4>
<p>The <code>data</code> field is an object with following fields: </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>s</strong></td>
<td><code>String</code></td>
<td>symbol</td>
</tr>
<tr>
<td><strong>oi</strong></td>
<td><code>String</code></td>
<td>open interest</td>
</tr>
<tr>
<td><strong>fr</strong></td>
<td><code>String</code></td>
<td>funding rate</td>
</tr>
<tr>
<td><strong>fpf</strong></td>
<td><code>Boolean</code></td>
<td>funding payment flag</td>
</tr>
<tr>
<td><strong>ip</strong></td>
<td><code>String</code></td>
<td>index price</td>
</tr>
<tr>
<td><strong>mp</strong></td>
<td><code>String</code></td>
<td>mark price</td>
</tr>
<tr>
<td><strong>srct</strong></td>
<td><code>Long</code></td>
<td>source time</td>
</tr>
<tr>
<td><strong>fpt</strong></td>
<td><code>Long</code></td>
<td>next funding payment time</td>
</tr>
</tbody></table>
<h2 id='order-channels'>Order Channels</h2><h3 id='subscribe-all-order-related-channels'>Subscribe All Order-Related Channels</h3>
<p>You can subscribe/unsubscribe to all order-related channels with one message.</p>

<p>To subscribe: </p>

<p><code>{&quot;op&quot;:&quot;sub&quot;, &quot;id&quot;: &quot;abcd1234&quot;, &quot;ch&quot;:&quot;order:futures&quot;}</code></p>

<p>To unsubscribe:</p>

<p><code>{&quot;op&quot;:&quot;unsub&quot;, &quot;id&quot;: &quot;abcd1234&quot;, &quot;ch&quot;:&quot;order:futures&quot;}</code></p>

<p>In both messages above, the <code>id</code> field is optional.</p>

<p>Once subscribed, you will start to receive messages from all the following channels:</p>

<ul>
<li><strong>order</strong> - order updates </li>
<li><strong>futures-collateral</strong> - updates in collateral balance </li>
<li><strong>futures-position</strong> - updates in contract position along with other contract-specifc data </li>
<li><strong>futures-risk</strong> - updates in overall account data</li>
</ul>
<h3 id='channel-order'>Channel: Order</h3>
<blockquote>
<p>Order Message</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"m"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"futZrwfTaL4Py6M05X0SnJ9QFIuj6k2Q"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ac"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"sn"</span><span class="p">:</span><span class="w">      </span><span class="mi">12231</span><span class="p">,</span><span class="w">
        </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a16fd950062a5362614103bbtcpV3DE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ot"</span><span class="p">:</span><span class="w">      </span><span class="s2">"Limit"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"s"</span><span class="p">:</span><span class="w">       </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"t"</span><span class="p">:</span><span class="w">       </span><span class="mi">1579898898603</span><span class="p">,</span><span class="w">
        </span><span class="s2">"p"</span><span class="p">:</span><span class="w">       </span><span class="s2">"6000"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"q"</span><span class="p">:</span><span class="w">       </span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sd"</span><span class="p">:</span><span class="w">      </span><span class="s2">"Buy"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"st"</span><span class="p">:</span><span class="w">      </span><span class="s2">"New"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ap"</span><span class="p">:</span><span class="w">      </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"cfq"</span><span class="p">:</span><span class="w">     </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sp"</span><span class="p">:</span><span class="w">      </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"err"</span><span class="p">:</span><span class="w">     </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"cf"</span><span class="p">:</span><span class="w">      </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fa"</span><span class="p">:</span><span class="w">      </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ei"</span><span class="p">:</span><span class="w">      </span><span class="s2">"NULL_VAL"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='channel'>Channel</h4>
<p><code>order:futures</code> </p>
<h4 id='message-schema'>Message Schema</h4>
<p>The <code>data</code> field is an object with following fields: </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>sn</strong></td>
<td><code>Long</code></td>
<td>sequence number</td>
</tr>
<tr>
<td><strong>orderId</strong></td>
<td><code>String</code></td>
<td>order ID</td>
</tr>
<tr>
<td><strong>ot</strong></td>
<td><code>String</code></td>
<td>order type</td>
</tr>
<tr>
<td><strong>s</strong></td>
<td><code>String</code></td>
<td>symbol</td>
</tr>
<tr>
<td><strong>t</strong></td>
<td><code>Long</code></td>
<td>timestamp</td>
</tr>
<tr>
<td><strong>p</strong></td>
<td><code>String</code></td>
<td>order price</td>
</tr>
<tr>
<td><strong>q</strong></td>
<td><code>String</code></td>
<td>order quantity</td>
</tr>
<tr>
<td><strong>sd</strong></td>
<td><code>String</code></td>
<td>order side</td>
</tr>
<tr>
<td><strong>st</strong></td>
<td><code>String</code></td>
<td>status</td>
</tr>
<tr>
<td><strong>ap</strong></td>
<td><code>String</code></td>
<td>average filled price</td>
</tr>
<tr>
<td><strong>cfq</strong></td>
<td><code>String</code></td>
<td>cummulative filled quantity</td>
</tr>
<tr>
<td><strong>sp</strong></td>
<td><code>String</code></td>
<td>stop price</td>
</tr>
<tr>
<td><strong>err</strong></td>
<td><code>String</code></td>
<td>error code</td>
</tr>
<tr>
<td><strong>cf</strong></td>
<td><code>String</code></td>
<td>cummulative commission (fee)</td>
</tr>
<tr>
<td><strong>fa</strong></td>
<td><code>String</code></td>
<td>fee asset</td>
</tr>
<tr>
<td><strong>ei</strong></td>
<td><code>String</code></td>
<td>execution instruction</td>
</tr>
</tbody></table>
<h3 id='channel-contract-position-updates'>Channel: Contract Position Updates</h3>
<blockquote>
<p>Futures Position (per-symbol data)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"m"</span><span class="p">:</span><span class="w"> </span><span class="s2">"futures-position"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"futZrwfTaL4Py6M05X0SnJ9QFIuj6k2Q"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ac"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"s"</span><span class="p">:</span><span class="w">    </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sn"</span><span class="p">:</span><span class="w">   </span><span class="mi">12231</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pos"</span><span class="p">:</span><span class="w">  </span><span class="s2">"0.09"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"posn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"762.664258566"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"liq"</span><span class="p">:</span><span class="w">  </span><span class="s2">"8923.12309342"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"bepx"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7039.079563344"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pnl"</span><span class="p">:</span><span class="w">  </span><span class="s2">"129.147097865"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ucol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"68.133212928"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mbos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29.749513885"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"msos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29.99781026"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='channel'>Channel</h4>
<p><code>order:futures</code> </p>
<h4 id='message-schema'>Message Schema</h4>
<p>The <code>data</code> field is an object with following fields: </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>s</strong></td>
<td><code>String</code></td>
<td>contract symbol</td>
</tr>
<tr>
<td><strong>sn</strong></td>
<td><code>Long</code></td>
<td>sequence number</td>
</tr>
<tr>
<td><strong>pos</strong></td>
<td><code>String</code></td>
<td>contract position</td>
</tr>
<tr>
<td><strong>posn</strong></td>
<td><code>String</code></td>
<td>contract position notional value in USDT</td>
</tr>
<tr>
<td><strong>liq</strong></td>
<td><code>String</code></td>
<td>estimated liquidation price</td>
</tr>
<tr>
<td><strong>bepx</strong></td>
<td><code>String</code></td>
<td>break-even price</td>
</tr>
<tr>
<td><strong>pnl</strong></td>
<td><code>String</code></td>
<td>contract position profit/loss in USDT</td>
</tr>
<tr>
<td><strong>ucol</strong></td>
<td><code>String</code></td>
<td>collateral in use (in USDT)</td>
</tr>
<tr>
<td><strong>mbos</strong></td>
<td><code>String</code></td>
<td>maximum quantity allowed to buy</td>
</tr>
<tr>
<td><strong>msos</strong></td>
<td><code>String</code></td>
<td>maximum quantity allowed to sell</td>
</tr>
</tbody></table>
<h3 id='channel-futures-collateral-updates'>Channel: Futures Collateral Updates</h3>
<blockquote>
<p>Futures Collateral </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"m"</span><span class="p">:</span><span class="w"> </span><span class="s2">"futures-collateral"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"futZrwfTaL4Py6M05X0SnJ9QFIuj6k2Q"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ac"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"a"</span><span class="p">:</span><span class="w">  </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sn"</span><span class="p">:</span><span class="w"> </span><span class="mi">12503</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ab"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='channel'>Channel</h4>
<p><code>order:futures</code> </p>
<h4 id='message-schema'>Message Schema</h4>
<p>The <code>data</code> field is an object with following fields: </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>a</strong></td>
<td><code>String</code></td>
<td>asset code</td>
</tr>
<tr>
<td><strong>sn</strong></td>
<td><code>Long</code></td>
<td>sequence number</td>
</tr>
<tr>
<td><strong>tb</strong></td>
<td><code>String</code></td>
<td>total balance</td>
</tr>
<tr>
<td><strong>ab</strong></td>
<td><code>String</code></td>
<td>available balance</td>
</tr>
<tr>
<td><strong>mt</strong></td>
<td><code>String</code></td>
<td>maximum transferrable amount</td>
</tr>
</tbody></table>
<h3 id='channel-futures-account-risk'>Channel: Futures Account Risk</h3>
<blockquote>
<p>Futures Risk (overall account data)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"m"</span><span class="p">:</span><span class="w"> </span><span class="s2">"futures-risk"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"futZrwfTaL4Py6M05X0SnJ9QFIuj6k2Q"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ac"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"col"</span><span class="p">:</span><span class="w">    </span><span class="s2">"12800.39525"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effcol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12800.39525"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ucol"</span><span class="p">:</span><span class="w">   </span><span class="s2">"68.133212928"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"frcol"</span><span class="p">:</span><span class="w">  </span><span class="s2">"12732.262037071"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"walbal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12970.11105"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"actval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13099.258147865"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"posn"</span><span class="p">:</span><span class="w">   </span><span class="s2">"762.664258566"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"epn"</span><span class="p">:</span><span class="w">    </span><span class="s2">"1362.664258566"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"clv"</span><span class="p">:</span><span class="w">    </span><span class="s2">"0.106454857"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amar"</span><span class="p">:</span><span class="w">   </span><span class="s2">"9.393653036"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tmar"</span><span class="p">:</span><span class="w">   </span><span class="s2">"0.003"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"emmar"</span><span class="p">:</span><span class="w">  </span><span class="s2">"0.006"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eimar"</span><span class="p">:</span><span class="w">  </span><span class="s2">"0.05"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"alv"</span><span class="p">:</span><span class="w">    </span><span class="s2">"20"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pnltot"</span><span class="p">:</span><span class="w"> </span><span class="s2">"129.147097865"</span><span class="p">,</span><span class="w">  
        </span><span class="s2">"upnl"</span><span class="p">:</span><span class="w">   </span><span class="s2">"129.147097865"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"spnl"</span><span class="p">:</span><span class="w">   </span><span class="s2">"0"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='channel'>Channel</h4>
<p><code>order:futures</code> </p>
<h4 id='message-schema'>Message Schema</h4>
<p>The <code>data</code> field is an object with following fields: </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>col</strong></td>
<td><code>String</code></td>
<td>total collateral value in USDT</td>
</tr>
<tr>
<td><strong>effcol</strong></td>
<td><code>String</code></td>
<td>effective collateral value in USDT</td>
</tr>
<tr>
<td><strong>ucol</strong></td>
<td><code>String</code></td>
<td>account overall collateral in use (in USDT)</td>
</tr>
<tr>
<td><strong>frcol</strong></td>
<td><code>String</code></td>
<td>account overall free collateral (in USDT)</td>
</tr>
<tr>
<td><strong>walbal</strong></td>
<td><code>String</code></td>
<td>total wallet balance in USDT</td>
</tr>
<tr>
<td><strong>actval</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>posn</strong></td>
<td><code>String</code></td>
<td>account overall position notional value in USDT</td>
</tr>
<tr>
<td><strong>epn</strong></td>
<td><code>String</code></td>
<td>account overall effective position notional in USDT</td>
</tr>
<tr>
<td><strong>clv</strong></td>
<td><code>String</code></td>
<td>account leverage</td>
</tr>
<tr>
<td><strong>alv</strong></td>
<td><code>String</code></td>
<td>account maximum leverage</td>
</tr>
<tr>
<td><strong>amar</strong></td>
<td><code>String</code></td>
<td>account margin rate</td>
</tr>
<tr>
<td><strong>tmar</strong></td>
<td><code>String</code></td>
<td>takeover margin rate</td>
</tr>
<tr>
<td><strong>emmar</strong></td>
<td><code>String</code></td>
<td>effective maintenance margin rate</td>
</tr>
<tr>
<td><strong>eimar</strong></td>
<td><code>String</code></td>
<td>effective initial margin rate</td>
</tr>
<tr>
<td><strong>pnl</strong></td>
<td><code>String</code></td>
<td>position notional in USDT</td>
</tr>
<tr>
<td><strong>larMaxLev</strong></td>
<td><code>Int</code></td>
<td>largestOptionalMaxLeverage ???</td>
</tr>
<tr>
<td><strong>upnl</strong></td>
<td><code>String</code></td>
<td>unrealized pnl</td>
</tr>
<tr>
<td><strong>rpnl</strong></td>
<td><code>String</code></td>
<td>realized pnl</td>
</tr>
</tbody></table>
<h2 id='websocket-data-request'>WebSocket - Data Request</h2><h3 id='ws-orderbook-snapshot'>WS: Orderbook Snapshot</h3>
<blockquote>
<p>Requesting the current order book snapshot</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"req"</span><span class="p">,</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdefg"</span><span class="p">,</span><span class="w"> </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"depth-snapshot"</span><span class="p">,</span><span class="w"> </span><span class="s2">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERP"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Depth snapshot message</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"m"</span><span class="p">:</span><span class="w"> </span><span class="s2">"depth-snapshot"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd1234"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"seqnum"</span><span class="p">:</span><span class="w"> </span><span class="mi">3167819629</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1573142900389</span><span class="p">,</span><span class="w">
        </span><span class="s2">"asks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="s2">"0.06758"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"585"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="s2">"0.06773"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"8732"</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"bids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="s2">"0.06733"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"667"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="s2">"0.06732"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"750"</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You can request the current order book via websocket by an <code>depth-snapshot</code> request. </p>

<p>The <code>args</code> schema:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>op</strong></td>
<td><code>String</code></td>
<td><code>req</code></td>
</tr>
<tr>
<td><strong>action</strong></td>
<td><code>String</code></td>
<td><code>depth-snapshot</code></td>
</tr>
<tr>
<td><strong>id</strong></td>
<td><code>String</code></td>
<td>for result match purpose</td>
</tr>
<tr>
<td><strong>args:symbol</strong></td>
<td><code>String</code></td>
<td>Symbol, e.g. <code>BTC-PERP</code></td>
</tr>
</tbody></table>

<p>The response schema:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>m</strong></td>
<td><code>String</code></td>
<td><code>depth-snapshot</code></td>
</tr>
<tr>
<td><strong>symbol</strong></td>
<td><code>String</code></td>
<td>Symbol, e.g. <code>BTC-PERP</code></td>
</tr>
<tr>
<td><strong>id</strong></td>
<td><code>String</code></td>
<td>echo back <code>id</code> in request</td>
</tr>
<tr>
<td><strong>data:seqnum</strong></td>
<td><code>Long</code></td>
<td></td>
</tr>
<tr>
<td><strong>data:ts</strong></td>
<td><code>Long</code></td>
<td>UTC Timestamp in milliseconds</td>
</tr>
<tr>
<td><strong>data:asks</strong></td>
<td><code>[[String, String]]</code></td>
<td>List of (price, size) pair</td>
</tr>
<tr>
<td><strong>data:bids</strong></td>
<td><code>[[String, String]]</code></td>
<td>List of (price, size) pair</td>
</tr>
</tbody></table>

<p>You can following the steps below to keep track of the the most recent order book:</p>

<ul>
<li>Connecting to WebSocket Stream</li>
<li>Subscribe to the depth update stream, see <a href="#level-2-order-book-updates-depth">Level 2 Order Book Updates (Depth)</a>.</li>
<li>Send a <code>depth-snapshot</code> request to the server.</li>
<li>Once you obtain the snapshot message from the server, initialize the snapshot.</li>
<li>Using consequent <code>depth</code> messages to update the order book.</li>
</ul>

<p>Please note that field <code>seqnum</code> should strictly increase by 1 for each new depth update (each <code>symbol</code> maintain its own <code>seqnum</code>). 
If you see a larger than 1 gap from previous <code>seqnum</code> (for the same <code>symbol</code>), then there might be data loss, 
you need to repeat above steps to maintain a new order book.</p>

<p>The <code>depth-snapshot</code> message is constructed in a consistent way with all <code>depth</code> message. </p>

<p>Please note that the <code>depth-snapshot</code> API has higher latency. The response time is usually between 
1000 - 2000 milliseconds. It is intended to help you initialize the orderbook, not to be used to obtain 
the timely order book data. </p>
<h3 id='ws-futures-account-risk'>WS: Futures Account Risk</h3>
<blockquote>
<p>Request futures risk</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w">      </span><span class="s2">"req"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"action"</span><span class="p">:</span><span class="w">  </span><span class="s2">"futures-risk"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w">      </span><span class="s2">"abcd1234"</span><span class="p">,</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Futures Risk Response </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"m"</span><span class="p">:</span><span class="w">         </span><span class="s2">"futures-risk"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"futZrwfTaL4Py6M05X0SnJ9QFIuj6k2Q"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ac"</span><span class="p">:</span><span class="w">        </span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w">        </span><span class="s2">"abcd1234"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"col"</span><span class="p">:</span><span class="w">    </span><span class="s2">"12800.39525"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effcol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12800.39525"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ucol"</span><span class="p">:</span><span class="w">   </span><span class="s2">"68.133212928"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"frcol"</span><span class="p">:</span><span class="w">  </span><span class="s2">"12732.262037071"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"walbal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12970.11105"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"actval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13099.258147865"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"posn"</span><span class="p">:</span><span class="w">   </span><span class="s2">"762.664258566"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"epn"</span><span class="p">:</span><span class="w">    </span><span class="s2">"1362.664258566"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"clv"</span><span class="p">:</span><span class="w">    </span><span class="s2">"0.106454857"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amar"</span><span class="p">:</span><span class="w">   </span><span class="s2">"9.393653036"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tmar"</span><span class="p">:</span><span class="w">   </span><span class="s2">"0.003"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"emmar"</span><span class="p">:</span><span class="w">  </span><span class="s2">"0.006"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eimar"</span><span class="p">:</span><span class="w">  </span><span class="s2">"0.05"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"alv"</span><span class="p">:</span><span class="w">    </span><span class="s2">"20"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pnltot"</span><span class="p">:</span><span class="w"> </span><span class="s2">"129.147097865"</span><span class="p">,</span><span class="w">  
        </span><span class="s2">"upnl"</span><span class="p">:</span><span class="w">   </span><span class="s2">"129.147097865"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"spnl"</span><span class="p">:</span><span class="w">   </span><span class="s2">"0"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You can request margin risk for a symbol via websocket by an <code>margin-risk</code> request. </p>

<p>The <code>args</code> schema:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>op</strong></td>
<td><code>String</code></td>
<td><code>req</code></td>
</tr>
<tr>
<td><strong>action</strong></td>
<td><code>String</code></td>
<td><code>futures-risk</code></td>
</tr>
<tr>
<td><strong>id</strong></td>
<td><code>String</code></td>
<td>for result match purpose</td>
</tr>
</tbody></table>

<p>The response schema:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>m</strong></td>
<td><code>String</code></td>
<td><code>depth-snapshot</code></td>
</tr>
<tr>
<td><strong>accountId</strong></td>
<td><code>String</code></td>
<td>futures accountId</td>
</tr>
<tr>
<td><strong>ac</strong></td>
<td><code>String</code></td>
<td><code>FUTURES</code></td>
</tr>
<tr>
<td><strong>symbol</strong></td>
<td><code>String</code></td>
<td>Symbol, e.g. <code>BTC-PERP</code></td>
</tr>
<tr>
<td><strong>id</strong></td>
<td><code>String</code></td>
<td>echo back <code>id</code> in request</td>
</tr>
<tr>
<td><strong>data</strong></td>
<td><code>Json</code></td>
<td>See <code>data</code> detail below</td>
</tr>
</tbody></table>

<p><code>data</code> field detail</p>

<table><thead>
<tr>
<th>Name</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>col</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>effcol</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>ucol</strong></td>
<td><code>String</code></td>
<td>collateral in use</td>
</tr>
<tr>
<td><strong>frcol</strong></td>
<td><code>String</code></td>
<td>free collateral</td>
</tr>
<tr>
<td><strong>walbal</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>actval</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>posn</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>epn</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>clv</strong></td>
<td><code>String</code></td>
<td>current leverage</td>
</tr>
<tr>
<td><strong>amar</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>tmar</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>emmar</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>eimar</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>alv</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>pnltot</strong></td>
<td><code>String</code></td>
<td></td>
</tr>
<tr>
<td><strong>upnl</strong></td>
<td><code>String</code></td>
<td>unsettled profit/loss</td>
</tr>
<tr>
<td><strong>spnl</strong></td>
<td><code>String</code></td>
<td>settled profit/loss</td>
</tr>
</tbody></table>
<h3 id='ws-place-order'>WS: Place Order</h3>
<blockquote>
<p>Request to place new order</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"req"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"place-Order"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"time"</span><span class="p">:</span><span class="w">       </span><span class="mi">1573772908483</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w">         </span><span class="s2">"11eb9a8355fc41bd9bf5b08bc0d18f6b"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">     </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"orderPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8500"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"orderQty"</span><span class="p">:</span><span class="w">   </span><span class="s2">"0.12"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"orderType"</span><span class="p">:</span><span class="w">  </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"side"</span><span class="p">:</span><span class="w">       </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"postOnly"</span><span class="p">:</span><span class="w">    </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"respInst"</span><span class="p">:</span><span class="w">   </span><span class="s2">"ACK"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Successful ACK message</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"m"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cshQtyfq8XLAA9kcf19h8bXHbAwwoqDo"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"accountCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"place-order"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ack"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Limit"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1576015701441</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"17e1f6809122469589ffc991523b505d"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s16ef1daefbe08669437121523b505d"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Error response message</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"m"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cshQtyfq8XLAA9kcf19h8bXHbAwwoqDo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"place-order"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Err"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w">      </span><span class="s2">"69c482a3f29540a0b0d83e00551bb623"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">  </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"code"</span><span class="p">:</span><span class="w">     </span><span class="mi">300011</span><span class="p">,</span><span class="w">
        </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Not Enough Account Balance"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"reason"</span><span class="p">:</span><span class="w">  </span><span class="s2">"INVALID_BALANCE"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Place order via websocket </p>

<p><strong>Request</strong></p>

<p>Make new order request follow the general websocket request rule, with proper place new order parameters as specified in rest api for <em>args</em> field.</p>

<p>see <a href="#place-an-order">placing order via RESTful API</a>.</p>

<p><strong>Response</strong></p>

<p>Respond with <em>m</em> field as <em>order</em>, and <em>action</em> field as <em>place-order</em>; <em>status</em> field to indicate if this is a successful <em>Ack</em> or failed <em>Err</em>.</p>

<p><em>ACK</em> </p>

<p>With <em>status</em> field as <em>Ack</em> to indicate this new order request pass some basic sanity check, and has been sent to matching engine. </p>

<p><em>info</em> field provide some detail: if you provide <em>id</em> in your request, it will be echoed back as <em>id</em> to help you identify; we also provide server side generated <em>orderId</em>, which is the id you should use for future track or action on the order.  </p>

<p><em>ERR</em> </p>

<p>With <em>status</em> field as <em>Err</em> to indicate there is some obvisous errors in your order. </p>

<p><em>info</em> field provide some detail: if you provide <em>id</em> in your request, it will be echoed back as <em>id</em> to help you identify; we also provide error <em>code</em>, <em>reason</em>, and <em>message</em> detail.</p>
<h3 id='ws-cancel-order'>WS: Cancel Order</h3>
<blockquote>
<p>Request to cancel existing open order</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"req"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancel-Order"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"futures"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w">    </span><span class="mi">1574165050128</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w">      </span><span class="s2">"2d4c3fa1e5c249e49f990ce86aebb607"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16e83845dcdsimtrader00008c645f67"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">  </span><span class="s2">"BTC-PERP"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Successful ACK message</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"m"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cshQtyfq8XLAA9kcf19h8bXHbAwwoqDo"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"accountCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancel-order"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ack"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">    </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NULL_VAL"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w">  </span><span class="mi">1574165050147</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w">        </span><span class="s2">"7b73dcd8e8c847d5a99df5ef5ae5088b"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w">   </span><span class="s2">"16e83845dcdsimtrader00008c645f67"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Error response message</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"m"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cshQtyfq8XLAA9kcf19h8bXHbAwwoqDo"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"accountCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancel-order"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ack"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w">     </span><span class="mi">300006</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w">      </span><span class="s2">"x@fabs"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid Client Order Id: x@fabs"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">  </span><span class="s2">"BTC-PERP"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reason"</span><span class="p">:</span><span class="w">  </span><span class="s2">"INVALID_ORDER_ID"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Cancel an existing open order via websocket </p>

<p><strong>Request</strong></p>

<p>Make order cancelling request follow the general websocket request rule by setting <code>action</code> to be <code>cancel-orde</code>, with proper cancel order parameters as specified in rest api for <em>args</em> field.</p>

<p><strong>Response</strong></p>

<p><em>ACK</em> </p>

<p>With <em>status</em> field as <em>Ack</em> to indicate this cancel order request pass some basic sanity check, and has been sent to matching engine. </p>

<p><em>info</em> field provide some detail: if you provide <em>id</em> in your request, it will be echoed back as <em>id</em> to help you idintify; we also echo back target <em>orderId</em> to be cancelled.  </p>

<p><em>Err</em></p>

<p>With <em>status</em> field as <em>Err</em> to indicate there is some obvisous errors in your cancel order request. </p>

<p><em>info</em> field provide some detail: if you provide <em>id</em> in your request, it will be echoed back as <em>id</em> to help you identify; we also provide error <em>code</em>, <em>reason</em>, and <em>message</em> detail.</p>
<h3 id='ws-cancel-all-orders'>WS: Cancel All Orders</h3>
<blockquote>
<p>Request to cancel all existing open orders </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"req"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancel-all"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Request to cancel existing open order related to symbol &quot;BTC-PERP&quot;</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"op"</span><span class="p">:</span><span class="w"> </span><span class="s2">"req"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancel-all"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"futures"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERP"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Successful ACK message</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"m"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cshQtyfq8XLAA9kcf19h8bXHbAwwoqDo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ac"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FUTURES"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancel-all"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ack"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">    </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"orderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NULL_VAL"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w">  </span><span class="mi">1574165159732</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w">        </span><span class="s2">"69c482a3f29540a0b0d83e00551bb623"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w">   </span><span class="s2">""</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Cancel all open orders on account level via websocket with optional symbol.</p>
<h4 id='request'>Request</h4>
<p>Make general websocket request with <code>action</code> field as <code>cancel-All</code> and set proper <code>account</code> value (<code>futures</code>), and provide <em>time</em> value in <em>args</em>.</p>
<h4 id='response'>Response</h4>
<p>With <em>status</em> field as <em>Ack</em> to indicate this cancel all order request has been received by server and sent to matching engine. </p>

<p><em>info</em> field provide some detail: if you provide <em>id</em> in your request, it will be echoed back as <em>id</em> to help you match ack with request.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="java">java</a>
          </div>
      </div>
    </div>
  </body>
</html>
